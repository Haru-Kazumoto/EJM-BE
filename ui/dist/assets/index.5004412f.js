import{c as K,d as L,e as Q,r as x,Y as _,g as $,R as U,a as e,j as l,F as q,D as V,B as S}from"./index.0e24cb86.js";import{P as W}from"./Page.b0ec3cd0.js";import{P as Y}from"./PageHeader.55df2133.js";import{B as G}from"./BuildingIcon.f5c2948f.js";import{B as J}from"./BeTable.bd0a6b42.js";import{A as R}from"./AddIcon.52f4e4fc.js";import{g as X}from"./TableCheckbox.7e306589.js";import{d as Z,a as w,g as ee}from"./companyActions.3310e078.js";import{U as te}from"./useTableHelper.5363dd1c.js";import{P as oe}from"./PagePadding.f9f1bdac.js";import{D as d}from"./DeleteIcon.85510701.js";import{E as ae}from"./EditIcon.0dd57a11.js";import{o as I,c as D}from"./uiActions.408d82e2.js";import{C as B}from"./ConfirmDelete.262b9563.js";import{u as P,E as j}from"./useError.ed61bdd7.js";import{u as ie}from"./useTranslation.d6d641af.js";import{B as n}from"./index.esm.726820fc.js";import"./ArrowLeftIcon.12227cb3.js";import"./index.esm.008f63b2.js";import"./index.esm.25501534.js";import"./FilterIcon.eea7884e.js";import"./index.esm.9fed1f3b.js";import"./slicedToArray.49cdadd5.js";import"./index.esm.68da116c.js";import"./index.238261e4.js";import"./ErrorEmpty.82811164.js";import"./Pagination.656d36c1.js";import"./ExpandLeftIcon.708a001b.js";import"./ExpandRightIcon.0088b7a2.js";import"./SearchInput.6e0cefa2.js";import"./useDebounce.f82902b3.js";import"./index.esm.3048a115.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./inheritsLoose.5105dba6.js";const Le=()=>{var C,b,k;const{t:p}=ie(["company","global"]),u=K(),r=L(),{setPagination:v,searchValue:g,pagination:c,handleSearch:z}=te(),s=Q(),[i,h]=x.exports.useState({}),f=_(),N=P(Z),T=P(w),{data:o,isLoading:A}=$(["companies",{searchValue:g,...c}],()=>ee({pageSize:c.pageSize,current:c.pageIndex+1,search:g}),{keepPreviousData:!1}),E=()=>u("/master/companies/add"),F=t=>{N.mutate(t,{onSuccess:a=>{s({status:"success",title:"success",description:a.message,position:"top",isClosable:!0}),r(D()),f.invalidateQueries(["companies"])},onError:a=>j(a,s)})},M=()=>{const t=Object.keys(i).map(a=>+a);T.mutate(t,{onSuccess:a=>{s({status:"success",title:"success",description:a.message,position:"top",isClosable:!0}),r(D()),h({}),f.invalidateQueries(["companies"])},onError:a=>j(a,s)})},O=t=>{r(I(e(B,{onDelete:()=>F(t)}),p("modal.title.delete"),"sm"))},y=()=>{r(I(e(B,{onDelete:M}),p("modal.title.delete"),"sm"))},H=U.useMemo(()=>[{id:"checkbox",...X({useCheckbox:!0})},{id:"No",width:"auto",header:"No",accessorFn:(t,a)=>a+1},{id:"Logo Perusahaan",header:"Logo Perusahaan",cell:({row:t})=>e("img",{src:t.original.profile_pict?`/api/v1/profiles/${t.original.profile_pict}`:"/images/default-image.jpg",alt:`Logo ${t.original.name}`,style:{borderRadius:50,border:"2px solid white",objectFit:"cover",width:40,height:40,maxWidth:40,maxHeight:40}})},{id:"Nama Perusahaan",header:"Nama Perusahaan",accessorKey:"name"},{id:"Total Struktur",header:"Total Struktur",cell:({row:t})=>{var a,m;return e("div",{children:(m=(a=t.original.structures)==null?void 0:a.length)!=null?m:0})}},{id:"Action",header:"Action",cell:({row:t})=>e(x.exports.Fragment,{children:l(q,{gap:2,alignItems:"center",children:[e(n,{size:"sm",leftIcon:e(ae,{}),variant:"outline",onClick:()=>u(`/master/companies/edit/${t.original.id}`),children:"Edit"}),e(n,{size:"sm",leftIcon:e(d,{}),onClick:()=>O(t.original.id),colorScheme:"red",children:"Delete"})]})})}],[]);return l(W,{title:"Company",children:[e(Y,{label:"Company",leftIcon:e(G,{fontSize:20}),additional:e(n,{leftIcon:e(R,{fontSize:20}),onClick:E,size:{base:"xs",lg:"sm"},children:"Add Company"})}),e(V,{}),e(oe,{x:0,y:6}),e(J,{data:(o==null?void 0:o.company)||[],onChangeTable:v,loading:A,onSearch:z,rowKey:(t,a,m)=>t==null?void 0:t.id,pagination:{pageIndex:Number((C=o==null?void 0:o.page)!=null?C:0)-1,pageSize:Number((b=o==null?void 0:o.page_size)!=null?b:10)},leftFilter:e(S,{display:{base:"none",md:"block"},children:l(n,{leftIcon:e(d,{}),colorScheme:"red",onClick:y,disabled:Boolean(Object.keys(i).length<1),children:["Delete ",Object.keys(i).length," data"]})}),bottomFilter:e(S,{display:{base:"block",md:"none"},children:l(n,{leftIcon:e(d,{}),colorScheme:"red",size:"xs",onClick:y,disabled:Boolean(Object.keys(i).length<1),children:["Delete ",Object.keys(i).length," data"]})}),pageCount:Number((k=o==null?void 0:o.page_count)!=null?k:0),columns:H,useSearchInput:!0,rowSelectionProps:i,onCheckboxChange:h,totalRecords:o==null?void 0:o.total})]})};export{Le as default};
