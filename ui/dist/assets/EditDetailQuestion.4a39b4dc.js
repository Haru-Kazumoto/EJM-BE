import{P as Q}from"./PageHeader.55df2133.js";import{a as S}from"./FormFieldControl.6d022860.js";import{P as l}from"./PagePadding.f9f1bdac.js";import{S as b}from"./SaveIcon.a38dc1b6.js";import{P as _}from"./Page.b0ec3cd0.js";import{F as q}from"./FormFieldQuestion.9253eb2d.js";import{u as x,e as B}from"./questionActions.28a337fa.js";import{u as F,E as d}from"./useError.ed61bdd7.js";import{aV as I,c as j,e as k,Y as C,g as D,j as r,a,h as M}from"./index.0e24cb86.js";import{E as L}from"./ErrorFetching.2cd1a256.js";import{B as T}from"./index.esm.726820fc.js";import"./ArrowLeftIcon.12227cb3.js";import"./index.esm.008f63b2.js";import"./index.esm.25501534.js";import"./FieldText.629ceab0.js";import"./FieldSwitch.02ffd7e0.js";import"./index.esm.68da116c.js";import"./index.238261e4.js";import"./AddIcon.52f4e4fc.js";import"./FormFieldAnswerQuestions.7cf1f25d.js";import"./DeleteIcon.85510701.js";import"./FieldSelect.e91ecae3.js";import"./select.f59423ba.js";import"./slicedToArray.49cdadd5.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./index.esm.9fed1f3b.js";import"./useTranslation.d6d641af.js";const pt=()=>{const{id:i}=I(),c=j(),s=k(),f=C(),g=F(x),v=t=>{var n;const E={...t,is_mandatory:(n=t.is_mandatory)!=null?n:!1,options:t.options&&t.options.length>0?t.options.map(o=>{var m;return{...o,conditions:o.conditions.length>0?o.conditions.map(u=>{var p;return{...u,is_mandatory:(p=u.is_mandatory)!=null?p:!1}}):[],value:(m=o.value)==null?void 0:m.value}}):null};g.mutate({data:E,id:i},{onSuccess:o=>{s({status:"success",title:"Sukses",description:o.message,position:"top",isClosable:!0}),f.invalidateQueries(["questions"]),c(-1)},onError:o=>d(o,s)})},{data:e,isLoading:y,isSuccess:P,isError:h}=D(["detail_question",i],()=>B(i),{enabled:!!i,cacheTime:0,onError:t=>d(t,s),keepPreviousData:!1});return r(_,{title:"Edit Pertanyaan",children:[a(Q,{label:"Edit Pertanyaan",useBackButton:!0}),r(l,{x:6,children:[y&&a(M,{}),P&&r(S,{onSubmit:v,id:"form-questions",initialValues:{name:e.data.name,is_mandatory:e.data.isMandatory,options:e.data.answers&&e.data.answers.map(t=>({name:t.name,value:{label:t.value.toString(),value:t.value},conditions:t.conditions||[]}))},children:[a(q,{}),a(l,{x:6,children:a(T,{type:"submit",leftIcon:a(b,{}),mt:5,children:"Save"})})]}),h&&a(L,{})]})]})};export{pt as default};
