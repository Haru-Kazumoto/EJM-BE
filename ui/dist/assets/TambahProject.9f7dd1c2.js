import{P as j}from"./Page.ce903aa1.js";import{P}from"./PageHeader.954bf5c1.js";import{P as p}from"./PagePadding.8c1b0086.js";import{u as x,F as C,a as F}from"./FormFieldControl.b614070a.js";import{j as i,B as l,a as e,T as d,u as S,R as I,F as b,f as w,a4 as v,c as _,D as h,aq as g,ar as m}from"./index.4df5dae3.js";import{F as k}from"./FormFieldProject.7aa03029.js";import{F as B}from"./FieldCustom.5b6685a5.js";import{S as T}from"./SelectCompanies.9f890644.js";import{b as D}from"./companyActions.f4866318.js";import{Q as N}from"./QuestionIcon.341b8802.js";import{T as M}from"./index.esm.2ca9b441.js";import{k as W}from"./projectActions.f553fa80.js";import{u as A,E}from"./useError.46aba7e3.js";import{B as L}from"./index.esm.780dcd2c.js";import"./ArrowLeftIcon.0c9057ff.js";import"./FieldText.6d44809e.js";import"./slicedToArray.556cd5c1.js";import"./FieldTextArea.823a0dbf.js";import"./useGetPrevPageParam.cb1386c2.js";import"./useDebounce.b8118708.js";import"./useSelectDataMapper.6391f061.js";import"./select.0fe29549.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./index.esm.f3b9d19a.js";const f=({title:r,description:a})=>i(l,{children:[e(d,{fontWeight:"semibold",fontSize:{base:18,md:23},children:r}),e(d,{display:{base:"none",md:"block"},children:a})]}),y=({items:r=[],idsToRender:a=[],indentLevel:n=0})=>{const{colorMode:o}=S();a.length||(a=r.length>0&&r.filter(t=>!t.parentId||t.parentId=="0")||[]);const s=t=>{const u=r.filter(c=>c.parentId===t);return u.length?e(y,{items:r,indentLevel:n+1,idsToRender:u}):null};return i("ul",{style:{paddingLeft:n>0?20:0},children:[n<1&&r.length>1&&e(l,{width:.5,height:`calc(100% - ${r.length+38}px)`,bg:o==="light"?"black":"white",position:"absolute",left:0,top:3}),a.length>0&&a.map((t,u)=>{var c;return i(I.Fragment,{children:[i("li",{style:{marginBottom:5,marginLeft:10,display:"flex",gap:2,alignItems:"center"},children:[e(l,{width:`${20*(n+1)-15}px`,height:.5,bg:o==="light"?"black":"white",position:"absolute",left:0}),i(b,{gap:2,alignItems:"center",children:[e(d,{children:(c=t.structureName)!=null?c:t.name}),e(M,{label:"Scope of Works",children:e(l,{children:e(N,{})})})]})]}),e(p,{x:0,y:2}),s(t.id)]},t.id)})]})},Q=()=>{const{control:r,formState:a,watch:n}=x(),o=n("company_id"),{data:s,isSuccess:t}=w(["detail_company",o?o.value:null],()=>D(o?+o.value:null),{enabled:!!o});return i(b,{gap:5,flexDirection:"column",children:[e(C,{control:r,formState:a,label:"Pilih Company",id:"company_id",name:"company_id",rules:{required:{value:!0,message:"Dibutuhkan"}},children:e(B,{children:e(T,{})})}),e(d,{fontWeight:"bold",children:"Struktur Perusahaan"}),t&&e(l,{position:"relative",children:e(y,{items:s.data.structures})})]})},me=()=>{const r=A(W),a=v(),n=_();return e(j,{title:"Tambah Project baru",children:i(F,{onSubmit:s=>{r.mutate({...s,project_type:s.project_type.value,project_status:s.project_status.value,company_id:s.company_id.value},{onSuccess:t=>{a({status:"success",title:"Success",position:"top",isClosable:!0,description:t.message}),n("/activity/projects")},onError:t=>E(t,a)})},id:"form-project",children:[e(P,{label:"Tambah Project Baru",useBackButton:!0}),e(h,{}),e(p,{x:6,y:6,children:i(g,{justifyContent:"space-between",alignItems:"center",templateColumns:{base:"repeat(1,1fr)",md:"repeat(3,1fr)"},gap:{base:5,md:0},children:[e(m,{children:e(f,{title:"Deskripsi Project",description:"Isi Informasi tentang project"})}),e(m,{colSpan:{base:3,md:2},children:e(k,{})})]})}),e(h,{}),e(p,{x:6,y:6,children:i(g,{justifyContent:"space-between",alignItems:"center",templateColumns:{base:"repeat(1,1fr)",md:"repeat(3,1fr)"},gap:{base:5,md:0},children:[e(m,{children:e(f,{title:"Perusahaan",description:"Pilih salah satu perusahaan"})}),e(m,{colSpan:{base:3,md:2},children:e(Q,{})})]})}),e(h,{}),e(p,{x:6,y:6,children:e(L,{variant:"solid",type:"submit",float:"right",isLoading:r.isLoading,children:"Simpan"})})]})})};export{me as default};
