var a=!1,r=null,n=!1,d=new Set,f=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function l(e){return!(e.metaKey||!f&&e.altKey||e.ctrlKey)}function i(e,o){d.forEach(u=>u(e,o))}function s(e){n=!0,l(e)&&(r="keyboard",i("keyboard",e))}function t(e){r="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(n=!0,i("pointer",e))}function p(e){e.target===window||e.target===document||(n||(r="keyboard",i("keyboard",e)),n=!1)}function w(){n=!1}function c(){return r!=="pointer"}function m(){if(typeof window>"u"||a)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...u){n=!0,e.apply(this,u)},document.addEventListener("keydown",s,!0),document.addEventListener("keyup",s,!0),window.addEventListener("focus",p,!0),window.addEventListener("blur",w,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",t,!0),document.addEventListener("pointermove",t,!0),document.addEventListener("pointerup",t,!0)):(document.addEventListener("mousedown",t,!0),document.addEventListener("mousemove",t,!0),document.addEventListener("mouseup",t,!0)),a=!0}function y(e){m(),e(c());const o=()=>e(c());return d.add(o),()=>{d.delete(o)}}export{y as t};
