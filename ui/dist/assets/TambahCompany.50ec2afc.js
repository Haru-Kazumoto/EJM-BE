import{a as f,P as n}from"./PagePadding.1c9da704.js";import{P as y}from"./PageHeader.f142dabc.js";import{a as C}from"./FormFieldControl.2c89898e.js";import{F as g,a as b}from"./FormFieldCompanyStructure.d3692100.js";import{S as h}from"./SaveIcon.87f3069f.js";import{c as S}from"./companyActions.ce65fea3.js";import{u as F,E as u}from"./useError.dc03fcf4.js";import{a2 as P,c as j,aa as v,j as l,a as e,D as d}from"./index.36e5c8e0.js";import{B as x}from"./index.esm.c218bf3a.js";import"./ArrowLeftIcon.59577fdf.js";import"./FieldText.f9548c3f.js";import"./index.esm.0f58bf09.js";import"./FileIcon.df2dfc6b.js";import"./FieldSelect.1fa99dbd.js";import"./select.3b6ee5a4.js";import"./slicedToArray.69cafb3e.js";import"./index.esm.4c8c0183.js";import"./index.esm.9df59221.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./AddIcon.e50b4361.js";import"./DeleteIcon.1e8d691c.js";const K=()=>{const i=F(S),o=P(),m=j(),c=v();return l(f,{title:"Tambah Company",children:[e(y,{useBackButton:!0,label:"Tambah Company"}),e(n,{x:6,children:l(C,{onSubmit:s=>{const p=s.structures&&s.structures.length>0?s.structures.map(t=>({id:t.id,name:t.structureName,parentId:`${t.parentId}`})):[];if(!s.picture)i.mutate({...s,object_structures:p},{onSuccess:t=>{o({title:"Success",description:t.message,position:"top",status:"success",isClosable:!0}),c.invalidateQueries(["companies"]),m("/master/companies")},onError:t=>u(t,o)});else{const t=new FormData;for(const[r,a]of Object.entries(s))r==="picture"?t.append("file",a==null?void 0:a[0]):r==="structures"?t.append("object_structures_string",JSON.stringify(p)):t.append(r,a);i.mutate(t,{onSuccess:r=>{o({title:"Success",description:r.message,position:"top",status:"success",isClosable:!0}),c.invalidateQueries(["companies"]),m("/master/companies")},onError:r=>u(r,o)})}},id:"form-company",initialValues:{name:null,picture:null,structures:[]},children:[e(g,{}),e(n,{x:0,y:5,children:e(d,{})}),e(b,{}),e(n,{x:0,y:5,children:e(d,{})}),e(x,{mt:5,leftIcon:e(h,{}),type:"submit",isLoading:i.isLoading,children:"Save"})]})})]})};export{K as default};
