import{P as p,a as j}from"./PagePadding.be31ae21.js";import{P}from"./PageHeader.6ac11668.js";import{u as x,F as C,a as F}from"./FormFieldControl.8ea8ed9e.js";import{j as i,B as l,a as e,T as d,u as S,R as I,F as b,f as w,a2 as v,c as _,D as h,ap as g,aq as m}from"./index.990a5e8d.js";import{F as k}from"./FormFieldProject.e86a0090.js";import{F as B}from"./FieldCustom.a9e1b9bb.js";import{S as T}from"./SelectCompanies.d03d062c.js";import{b as D}from"./companyActions.344b1a40.js";import{Q as N}from"./QuestionIcon.569bcd36.js";import{T as M}from"./index.esm.3c7789c6.js";import{e as W}from"./projectActions.5a81ee6f.js";import{u as A,E}from"./useError.dd598f5e.js";import{B as L}from"./index.esm.27876472.js";import"./ArrowLeftIcon.e64cc763.js";import"./FieldText.f2654eae.js";import"./index.esm.86199dec.js";import"./slicedToArray.925b8532.js";import"./index.esm.3fa18c93.js";import"./index.esm.c75d359e.js";import"./FieldTextArea.628a288f.js";import"./useSelectDataMapper.40d26318.js";import"./useDebounce.51d664ab.js";import"./select.1937eae9.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";const f=({title:r,description:a})=>i(l,{children:[e(d,{fontWeight:"semibold",fontSize:{base:18,md:23},children:r}),e(d,{display:{base:"none",md:"block"},children:a})]}),y=({items:r=[],idsToRender:a=[],indentLevel:n=0})=>{const{colorMode:o}=S();a.length||(a=r.length>0&&r.filter(t=>!t.parentId||t.parentId=="0")||[]);const s=t=>{const u=r.filter(c=>c.parentId===t);return u.length?e(y,{items:r,indentLevel:n+1,idsToRender:u}):null};return i("ul",{style:{paddingLeft:n>0?20:0},children:[n<1&&r.length>1&&e(l,{width:.5,height:`calc(100% - ${r.length+38}px)`,bg:o==="light"?"black":"white",position:"absolute",left:0,top:3}),a.length>0&&a.map((t,u)=>{var c;return i(I.Fragment,{children:[i("li",{style:{marginBottom:5,marginLeft:10,display:"flex",gap:2,alignItems:"center"},children:[e(l,{width:`${20*(n+1)-15}px`,height:.5,bg:o==="light"?"black":"white",position:"absolute",left:0}),i(b,{gap:2,alignItems:"center",children:[e(d,{children:(c=t.structureName)!=null?c:t.name}),e(M,{label:"Scope of Works",children:e(l,{children:e(N,{})})})]})]}),e(p,{x:0,y:2}),s(t.id)]},t.id)})]})},Q=()=>{const{control:r,formState:a,watch:n}=x(),o=n("company_id"),{data:s,isSuccess:t}=w(["detail_company",o?o.value:null],()=>D(o?+o.value:null),{enabled:!!o});return i(b,{gap:5,flexDirection:"column",children:[e(C,{control:r,formState:a,label:"Pilih Company",id:"company_id",name:"company_id",rules:{required:{value:!0,message:"Dibutuhkan"}},children:e(B,{children:e(T,{})})}),e(d,{fontWeight:"bold",children:"Struktur Perusahaan"}),t&&e(l,{position:"relative",children:e(y,{items:s.data.structures})})]})},me=()=>{const r=A(W),a=v(),n=_();return e(j,{title:"Tambah Project baru",children:i(F,{onSubmit:s=>{r.mutate({...s,project_type:s.project_type.value,project_status:s.project_status.value,company_id:s.company_id.value},{onSuccess:t=>{a({status:"success",title:"Success",position:"top",isClosable:!0,description:t.message}),n("/activity/projects")},onError:t=>E(t,a)})},id:"form-project",children:[e(P,{label:"Tambah Project Baru",useBackButton:!0}),e(h,{}),e(p,{x:6,y:6,children:i(g,{justifyContent:"space-between",alignItems:"center",templateColumns:{base:"repeat(1,1fr)",md:"repeat(3,1fr)"},gap:{base:5,md:0},children:[e(m,{children:e(f,{title:"Deskripsi Project",description:"Isi Informasi tentang project"})}),e(m,{colSpan:{base:3,md:2},children:e(k,{})})]})}),e(h,{}),e(p,{x:6,y:6,children:i(g,{justifyContent:"space-between",alignItems:"center",templateColumns:{base:"repeat(1,1fr)",md:"repeat(3,1fr)"},gap:{base:5,md:0},children:[e(m,{children:e(f,{title:"Perusahaan",description:"Pilih salah satu perusahaan"})}),e(m,{colSpan:{base:3,md:2},children:e(Q,{})})]})}),e(h,{}),e(p,{x:6,y:6,children:e(L,{variant:"solid",type:"submit",float:"right",isLoading:r.isLoading,children:"Simpan"})})]})})};export{me as default};
