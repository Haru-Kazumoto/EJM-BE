import{ak as v,R as y,r as N,a as o,j as g,i as $,an as w,T as O}from"./index.0e24cb86.js";import{u as T,a as j,G as q,b as D}from"./useSelectDataMapper.c05d958f.js";import{u as G}from"./useDebounce.f82902b3.js";import{S as I}from"./select.f59423ba.js";const R=async({pageSize:s,current:t,search:r,value:a,type:i})=>{const l=r&&r!=""?`&search=${r}`:"",n=a?`&value=${a}`:"";return(await v.get(`/master-lookup?type=${i}&page=${t!=null?t:1}&page_size=${s!=null?s:10}`+l+n)).data},V=y.forwardRef(({name:s,onChange:t,onBlur:r,value:a,isMulti:i=!1,placeholder:l,type_:n="",useAll:u=!1,disabled:m=!1},h)=>{const[P,f]=N.exports.useState(""),p=G(P,1e3),{fetchNextPage:x,hasNextPage:S,isError:b,isSuccess:M,isLoading:d,data:c,isFetchingNextPage:k}=T(["fetch_select_lookup",p,n,a],({pageParam:e=1})=>R({current:e,search:p,value:a==null?void 0:a.value,type:n,pageSize:15}),{getNextPageParam:e=>q(e),getPreviousPageParam:e=>D(e)}),L=j({isSuccess:M,data:c!=null?c:{pages:[],pageParams:[]},key:"lookup",prepend:u?[{label:"Semua",value:"all"}]:[],returnList:e=>({label:e.label,value:e.value})});return o(I,{name:s,ref:h,onChange:t,onBlur:r,isDisabled:m,value:a,onInputChange:f,isMulti:i,isLoading:k||d,isClearable:!0,noOptionsMessage:({inputValue:e})=>o("div",{children:"Tidak ada pilihan"}),loadingMessage:({inputValue:e})=>g($,{children:[g("div",{children:['Mencari "',e,'"']}),d&&o(w,{size:"xs",width:"100%",isIndeterminate:!0}),b&&o("div",{children:"Error saat mencari data"})]}),options:L,placeholder:o(O,{noOfLines:[1],children:l}),closeMenuOnScroll:!0,isSearchable:!0,onMenuScrollToBottom:async()=>{S&&await x()},closeMenuOnSelect:!0})});export{V as S};
