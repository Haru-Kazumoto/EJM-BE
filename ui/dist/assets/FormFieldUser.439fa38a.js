import{R as T,r as P,a as e,j as o,i as y,an as C,e as _,ar as I,as as v,B as w,T as R,F as j}from"./index.0e24cb86.js";import{u as M,F as i}from"./FormFieldControl.6d022860.js";import{F as c}from"./FieldText.629ceab0.js";import{F as k}from"./FieldTextArea.eda53a25.js";import{E as L}from"./EditIcon.0dd57a11.js";import{u as N,a as B,G,b as z}from"./useSelectDataMapper.c05d958f.js";import{u as A}from"./useDebounce.f82902b3.js";import{g as D}from"./rolesActions.f6ba71e7.js";import{S as O}from"./select.f59423ba.js";import{F as U}from"./FieldCustom.a890d568.js";import{E as V}from"./EyeIcon.0d72bd0e.js";import{F as $}from"./FieldSwitch.02ffd7e0.js";import{u as H}from"./useTranslation.d6d641af.js";import{T as K}from"./index.esm.008f63b2.js";import{I as S}from"./index.esm.726820fc.js";const Q=T.forwardRef(({name:a,onChange:t,onBlur:n,value:r,placeholder:l},g)=>{const[h,d]=P.exports.useState(""),p=A(h,1e3),{fetchNextPage:f,hasNextPage:b,isError:F,isSuccess:u,isLoading:m,data:x,isFetchingNextPage:q}=N(["fetch_select_roles",p],({pageParam:s=1})=>D({current:s,search:p,value:r==null?void 0:r.value,using_active:!0,pageSize:15}),{getNextPageParam:s=>G(s),getPreviousPageParam:s=>z(s)}),E=B({isSuccess:u,data:x!=null?x:{pages:[],pageParams:[]},key:"roles",returnList:s=>({label:s.name,value:s.id})});return e(O,{name:a,ref:g,onChange:t,onBlur:n,value:r,onInputChange:d,isLoading:q||m,isClearable:!0,noOptionsMessage:({inputValue:s})=>e("div",{children:"Tidak ada pilihan"}),loadingMessage:({inputValue:s})=>o(y,{children:[o("div",{children:['Mencari "',s,'"']}),m&&e(C,{size:"xs",width:"100%",isIndeterminate:!0}),F&&e("div",{children:"Error saat mencari data"})]}),options:E,placeholder:l,closeMenuOnScroll:!0,isSearchable:!0,onMenuScrollToBottom:()=>{b&&f()},closeMenuOnSelect:!0})}),W=a=>new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(a),r.onload=()=>t(r.result),r.onerror=l=>n(l)}),Y=["image/jpeg","image/png"],ce=()=>{const{control:a,formState:t,setValue:n}=M(),{t:r}=H(["validation"]),l=_(),[g,h]=P.exports.useState(!1),[d,p]=P.exports.useState(null),f=()=>h(!g),b=async F=>{const u=F.target.files[0];if(!Y.includes(u.type))l({position:"top",title:"Error",description:"Format dokumen wajib png / jpeg",isClosable:!0,status:"error"});else{n("file",u);try{const m=await W(u);p(m)}catch{l({position:"top",title:"Error",description:"Tidak bisa convert image",isClosable:!0,status:"error"})}}};return o(I,{gap:4,justifyContent:"center",templateColumns:{base:"repeat(1,1fr)",lg:"repeat(6,1fr)"},children:[o(v,{children:[o(w,{sx:{position:"relative",width:150,height:"min-content"},children:[e("img",{src:d!=null?d:"/images/default-image.jpg",alt:"EJM",style:{borderRadius:50,border:"2px solid white",objectFit:"cover",width:150,height:150,maxWidth:150,maxHeight:150}}),e(K,{label:"Edit Profile Picture",children:o(w,{children:[e(S,{"aria-label":"Edit",size:"lg",as:"label",htmlFor:"file",borderRadius:30,icon:e(L,{fontSize:26,p:0}),position:"absolute",bottom:0,right:0}),e("input",{hidden:!0,accept:"image/*",type:"file",multiple:!1,id:"file",onChange:b})]})})]}),e(R,{mt:5,children:"Change Profile Picture"})]}),e(v,{colSpan:5,children:o(j,{direction:"column",gap:4,flex:1,children:[e(i,{label:"Username",control:a,name:"username",formState:t,id:"username",rules:{required:{value:!0,message:r("required")}},children:e(c,{})}),e(i,{label:"Full Name",control:a,name:"full_name",formState:t,id:"full_name",rules:{required:{value:!0,message:r("required")}},children:e(c,{})}),e(i,{label:"Email",control:a,name:"email",formState:t,id:"email",rules:{required:{value:!0,message:r("required")},pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,message:r("email.invalid")}},children:e(c,{})}),e(i,{label:"Role",control:a,name:"role",formState:t,id:"role",rules:{required:{value:!0,message:r("required")}},children:e(U,{children:e(Q,{})})}),e(i,{label:"Nomor Telepon",control:a,name:"phone",formState:t,id:"phone",rules:{required:{value:!1,message:r("required")},pattern:{value:/\d$/,message:r("number")}},children:e(c,{leftElement:"+62"})}),e(i,{label:"Address",control:a,name:"address",formState:t,id:"address",rules:{required:{value:!1,message:r("required")}},children:e(k,{})}),e(i,{label:"Password",control:a,name:"password",formState:t,id:"password",rules:{required:{value:!0,message:r("required")},minLength:{value:6,message:`${r("min")} 6`}},children:e(c,{type:g?"text":"password",rightElement:e(S,{onClick:f,variant:"outline",h:"1.75rem",size:"sm",border:"none",icon:e(V,{}),"aria-label":"Toggle"})})}),e(i,{label:"Enable Login By Link",control:a,name:"enable_login_by_link",formState:t,id:"enable_login_by_link",rules:{required:{value:!1,message:r("required")}},children:e($,{})})]})})]})};export{ce as F};
