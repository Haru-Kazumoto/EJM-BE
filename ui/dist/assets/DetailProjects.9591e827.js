import{j as t,I as pe,a as e,aM as Me,F as _,T as x,ap as U,aq as I,B as M,aN as Y,aO as J,aP as ke,R as me,r as k,h as H,am as he,a2 as ge,e as G,aa as Te,u as Le,f as fe,aQ as De,aR as ze,c as Ee,g as le,ah as se}from"./index.36e5c8e0.js";import{a as Fe,P as we}from"./PagePadding.1c9da704.js";import{P as Ae}from"./PageHeader.f142dabc.js";import{A as be}from"./AddIcon.e50b4361.js";import{E as Be}from"./EditIcon.d610a85a.js";import{D as z}from"./Detailinformation.c7d0c3e1.js";import{B as Ne}from"./BuildingIcon.77b32647.js";import{C as Re,F as Oe}from"./FormFieldProject.bb4490da.js";import{U as Ue}from"./UserIcon.36cc8aa1.js";import{d as K}from"./dayjs.min.9509b64d.js";import{D as Qe}from"./DeleteIcon.1e8d691c.js";import{C as ee,c as re,a as te}from"./index.esm.5ccae681.js";import{T as w}from"./index.esm.f0e9f4ce.js";import{I as Q,B as L}from"./index.esm.c218bf3a.js";import{A as E,S as Se,a as Ve}from"./index.esm.08b5451d.js";import{S as ne}from"./SearchInput.7c7deac2.js";import{c as He,a as oe,S as Ge,u as $e,d as qe,b as We}from"./projectActions.d0ab648c.js";import{E as ve}from"./ErrorFetching.f00243df.js";import{E as F}from"./ErrorEmpty.98242666.js";import{u as A}from"./useDebounce.3f476afc.js";import{c as V,o as O}from"./uiActions.9774de99.js";import{a as Ye,C as ie}from"./index.esm.adaa90cb.js";import{F as Je,a as Ke,I as Ze,c as Xe,f as er,g as rr}from"./index.esm.0f58bf09.js";import{u as $,a as q,G as Ce,b as je}from"./useSelectDataMapper.533313d1.js";import{g as tr}from"./questionActions.2bac5b0b.js";import{S as _e}from"./select.3b6ee5a4.js";import{u as Z,E as X}from"./useError.dc03fcf4.js";import{e as ae}from"./index.esm.b9a837a9.js";import{C as nr}from"./ConfirmDelete.413178ec.js";import{a as Pe,u as or,F as ce}from"./FormFieldControl.2c89898e.js";import{S as ir}from"./SaveIcon.87f3069f.js";import{b as ar}from"./usersActions.aa8d3840.js";import{F as de}from"./FieldCustom.a580ac8f.js";import{T as lr,a as sr,b as B,c as cr,d as N}from"./index.esm.714f41b2.js";import"./ArrowLeftIcon.59577fdf.js";import"./FieldText.f9548c3f.js";import"./slicedToArray.69cafb3e.js";import"./index.esm.4c8c0183.js";import"./index.esm.9df59221.js";import"./FieldTextArea.c0a8f160.js";import"./useTranslation.7b5c047c.js";import"./index.238261e4.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./inheritsLoose.a68af86b.js";const R=({...n})=>t(pe,{...n,children:[e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 5C3 4.44772 3.44772 4 4 4H16C16.5523 4 17 4.44772 17 5C17 5.55228 16.5523 6 16 6H4C3.44772 6 3 5.55228 3 5Z",fill:"currentColor"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 10C3 9.44772 3.44772 9 4 9H16C16.5523 9 17 9.44772 17 10C17 10.5523 16.5523 11 16 11H4C3.44772 11 3 10.5523 3 10Z",fill:"currentColor"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 15C9 14.4477 9.44772 14 10 14H16C16.5523 14 17 14.4477 17 15C17 15.5523 16.5523 16 16 16H10C9.44772 16 9 15.5523 9 15Z",fill:"currentColor"})]});var ye={exports:{}};(function(n,d){(function(a,o){n.exports=o()})(Me,function(){return function(a,o,l){a=a||{};var s=o.prototype,C={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function h(i,p,b,S){return s.fromToBase(i,p,b,S)}l.en.relativeTime=C,s.fromToBase=function(i,p,b,S,y){for(var r,P,j,m=b.$locale().relativeTime||C,g=a.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],D=g.length,f=0;f<D;f+=1){var v=g[f];v.d&&(r=S?l(i).diff(b,v.d,!0):b.diff(i,v.d,!0));var u=(a.rounding||Math.round)(Math.abs(r));if(j=r>0,u<=v.r||!v.r){u<=1&&f>0&&(v=g[f-1]);var T=m[v.l];y&&(u=y(""+u)),P=typeof T=="string"?T.replace("%d",u):T(u,p,v.l,j);break}}if(p)return P;var W=j?m.future:m.past;return typeof W=="function"?W(P):W.replace("%s",P)},s.to=function(i,p){return h(i,p,this,!0)},s.from=function(i,p){return h(i,p,this)};var c=function(i){return i.$u?l.utc():l()};s.toNow=function(i){return this.to(c(this),i)},s.fromNow=function(i){return this.from(c(this),i)}}})})(ye);const dr=ye.exports;K.extend(dr);const ur=({data:n,onDelete:d,onEdit:a})=>t(ee,{children:[e(re,{children:t(_,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[e(x,{fontWeight:"medium",fontSize:19,children:"Project Info"}),t(_,{alignItems:"center",gap:2,children:[e(w,{label:"Edit Project Info",children:e(Q,{"aria-label":"Edit",variant:"unstyled",onClick:a,icon:e(Be,{fontSize:28,color:"yellow.400"})})}),e(w,{label:"Delete Project",children:e(Q,{"aria-label":"Delete",variant:"unstyled",onClick:d,icon:e(Qe,{fontSize:28,color:"red.400"})})})]})]})}),e(te,{children:t(U,{templateColumns:{base:"repeat(1,1fr)",md:"repeat(2,1fr)",xl:"repeat(3,1fr)"},gap:{base:5,md:2},children:[e(I,{children:e(z,{leftIcon:e(Ne,{fontSize:21}),label:"Company",value:t(_,{gap:2,alignItems:"center",children:[e(E,{size:"xs",objectFit:"cover",name:n.company.name,src:n.company.profile_pict?`/api/v1/profiles/${n.company.profile_pict}`:"/default-image.jpg"}),e(x,{fontSize:12,children:n.company.name})]}),direction:"column"})}),e(I,{children:e(z,{leftIcon:e(R,{fontSize:21}),label:"Project Type",direction:"column",value:n.select_project_type_label})}),e(I,{children:e(z,{leftIcon:e(R,{fontSize:21}),label:"Project Status",direction:"column",value:n.select_status_label})}),e(I,{children:e(z,{leftIcon:e(R,{fontSize:21}),label:"Project Code",direction:"column",value:n.project_code})}),e(I,{children:e(z,{leftIcon:e(Re,{fontSize:21}),label:"Due Date",direction:"column",value:t("div",{children:[e(x,{children:K(n.project_date).format("DD MMMM YYYY")}),t("small",{children:["(",K(n.project_date).fromNow(),")"]})]})})}),e(I,{children:e(z,{leftIcon:e(Ue,{fontSize:21}),label:"Assigned User",direction:"column",value:n.total_assigned_users.toString()})}),e(I,{colSpan:{base:0,xl:3},children:e(z,{leftIcon:e(R,{fontSize:21}),label:"Description",direction:"column",value:n.description})})]})})]}),pr=()=>t(ee,{children:[e(re,{children:e(x,{fontWeight:"medium",fontSize:19,children:"Task Progress"})}),e(te,{children:t(U,{templateColumns:{base:"repeat(1,1fr)",xl:"repeat(3,1fr)"},gap:5,children:[e(I,{children:t(_,{flexDirection:"column",alignItems:"center",children:[t("div",{style:{marginBottom:2},children:[e(x,{children:"Questionaire"}),e("small",{children:"( 10 / 210 )"})]}),e(M,{children:e(Y,{value:40,color:"green.400",size:150,children:e(J,{children:"40%"})})})]})}),e(I,{children:t(_,{flexDirection:"column",alignItems:"center",children:[t("div",{style:{marginBottom:2},children:[e(x,{children:"Inventory"}),e("small",{children:"( 10 / 50 )"})]}),e(M,{children:e(Y,{value:20,color:"green.400",size:150,children:e(J,{children:"20%"})})})]})}),e(I,{children:t(_,{flexDirection:"column",alignItems:"center",children:[t("div",{style:{marginBottom:2},children:[e(x,{children:"Volumes"}),e("small",{children:"( 5 / 10 )"})]}),e(M,{children:e(Y,{value:10,color:"green.400",size:150,children:e(J,{children:"10%"})})})]})})]})})]}),xe=(n="id",d="parentId",a,o="0")=>a.filter(l=>l[d]===o).map(l=>({...l,children:xe(n,d,a,l[n])})),Ie=({id:n,placeholder:d,label:a,isRequired:o=!1,errorMessage:l,type:s="text",leftElement:C,rightElement:h,isInvalid:c=!1,formState:i,direction:p="row",options:b,...S})=>t(Je,{isRequired:o,isInvalid:c,children:[a&&a!==""?e(Ke,{htmlFor:n,children:a}):null,t(Ze,{children:[C&&e(Xe,{pointerEvents:"none",alignItems:"center",children:C}),e(Ye,{...S,children:e(ke,{direction:p,children:b&&b.length>0?b.map(y=>e(ie,{value:y.value,children:y.label})):null})}),h&&e(er,{alignItems:"center",children:h})]}),e(rr,{children:l})]}),mr=me.forwardRef(({name:n,onChange:d,onBlur:a,value:o,placeholder:l},s)=>{const[C,h]=k.exports.useState(""),c=A(C,1e3),{fetchNextPage:i,hasNextPage:p,isError:b,isSuccess:S,isLoading:y,data:r,isFetchingNextPage:P}=$(["fetch_select_question_templates",c],({pageParam:m=1})=>tr({current:m,search:c,value:o==null?void 0:o.value,using_active:!0,pageSize:15}),{getNextPageParam:m=>Ce(m),getPreviousPageParam:m=>je(m)}),j=q({isSuccess:S,data:r!=null?r:{pages:[],pageParams:[]},key:"question_templates",returnList:m=>({label:m.name,value:m.id})});return e(_e,{name:n,ref:s,onChange:d,onBlur:a,value:o,onInputChange:h,isLoading:P||y,isClearable:!0,noOptionsMessage:({inputValue:m})=>e("div",{children:"Tidak ada pilihan"}),loadingMessage:({inputValue:m})=>t(H,{children:[t("div",{children:['Mencari "',m,'"']}),y&&e(he,{size:"xs",width:"100%",isIndeterminate:!0}),b&&e("div",{children:"Error saat mencari data"})]}),options:j,placeholder:l,closeMenuOnScroll:!0,isSearchable:!0,onMenuScrollToBottom:()=>{p&&i()},closeMenuOnSelect:!0})}),hr=({projectId:n})=>{const[d,a]=k.exports.useState(),[o,l]=k.exports.useState([]),[s,C]=k.exports.useState(null),h=ge(),c=G(),i=A(d,200),p=Z(He),b=Te(),{data:S,isLoading:y,isSuccess:r,isError:P,hasNextPage:j,fetchNextPage:m}=$(["assign_project_structures",n,i],({pageParam:u})=>oe({pageSize:20,current:u,search:i,project:+n}),{enabled:!!n}),g=q({isSuccess:r,data:S!=null?S:{pages:[],pageParams:[]},key:"structures",filterFn:u=>u.total_questions<1,returnList:u=>({label:`${u.structureCode} - ${u.name}`,value:JSON.stringify(u)})}),D=u=>{l(u?["all"]:[])},f=u=>{C(u)},v=()=>{let u=[];o.includes("all")?u=["all"]:o.map(T=>{u.push(JSON.parse(T).uuid)}),s!=null&&s.value?p.mutate({project_id:+n,question_template_id:s==null?void 0:s.value,structure_ids:u},{onSuccess:T=>{h({status:"success",description:T.message,position:"top",title:"Success",isClosable:!0}),b.invalidateQueries(["project_structures"]),c(V())},onError:T=>X(T,h)}):h({status:"warning",description:"Wajib pilih template",position:"top",title:"Validasi",isClosable:!0})};return t(M,{p:5,children:[t(_,{flexDirection:"column",gap:5,children:[e(mr,{placeholder:"-- Pilih Template --",value:s,onChange:f}),e(ne,{onChange:u=>{u.preventDefault(),a(u.target.value)}}),e(ie,{value:"all",onChange:u=>D(u.target.checked),children:"Semua"}),o&&o.length>0&&!o.includes("all")&&e(M,{children:t(_,{gap:3,alignItems:"center",children:[t(x,{fontSize:"sm",children:["Terpilih ",o.length," Unit "]}),e(L,{variant:"link",colorScheme:"red",size:"sm",onClick:()=>l([]),children:"Hapus Pilihan"})]})}),t(M,{maxH:500,overflowY:"auto",children:[y&&e(Se,{w:"100%",h:20}),P&&e(x,{children:"Error"}),r&&!o.includes("all")&&e(Ie,{options:g,direction:"column",value:o,disabled:o.includes("all"),onChange:l})]}),j&&e(_,{justifyContent:"center",w:"100%",children:e(L,{size:"sm",onClick:()=>m(),children:"Load More"})})]}),e(ae,{children:e(L,{variant:"solid",onClick:v,isLoading:p.isLoading,children:"Simpan"})})]})},ue=({...n})=>t(pe,{...n,children:[e("path",{d:"M2 14L5.23309 16.4248C5.66178 16.7463 6.26772 16.6728 6.60705 16.2581L15 6",stroke:"currentColor",strokeWidth:"2",fill:"transparent",strokeLinecap:"round"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.87451 15.7801L11.6031 17.163C12.4589 17.8477 13.7064 17.716 14.4004 16.8677L22.7741 6.63324C23.1238 6.20579 23.0608 5.57577 22.6333 5.22604C22.2059 4.87631 21.5759 4.93932 21.2262 5.36676L12.8525 15.6013L11.1411 14.2321L9.87451 15.7801Z",fill:"currentColor"})]}),gr=({projectId:n,active:d,onClick:a})=>{const[o,l]=k.exports.useState(null),{colorMode:s}=Le(),C=G(),h=A(o,100),{data:c,isLoading:i,isSuccess:p,isError:b}=fe(["project_structures",n,h],()=>oe({pageSize:100,current:1,search:h,project:+n}),{enabled:!!n}),S=k.exports.useCallback((r,P=0)=>{var j,m,g;return(r==null?void 0:r.children)&&((j=r==null?void 0:r.children)==null?void 0:j.length)>0?t(M,{position:"relative",children:[e(w,{label:r.name,children:t(_,{py:1,px:2,my:2,cursor:"pointer",justifyContent:"space-between",borderRadius:15,alignItems:"center",_hover:{backgroundColor:"rgba(104,211,145,0.35)"},backgroundColor:d===r.uuid?"rgba(104,211,145,0.35)":"none",onClick:()=>{a(r.uuid)},children:[t(x,{noOfLines:[1],children:[r.structureCode," - ",r.name]}),e(ue,{color:r.total_questions>0&&"brand.light"})]})}),e(M,{sx:{ml:5},children:(m=r==null?void 0:r.children)==null?void 0:m.map(D=>S(D,P+1))}),e(M,{width:.5,height:`calc(100% - ${((g=r==null?void 0:r.children)==null?void 0:g.length)+38}px)`,bg:s==="light"?"black":"white",position:"absolute",left:3,top:9})]}):e(w,{label:r.name,children:t(_,{py:1,my:2,px:2,_hover:{backgroundColor:"rgba(104,211,145,0.35)"},backgroundColor:d===r.uuid?"rgba(104,211,145,0.35)":"none",cursor:"pointer",onClick:()=>a(r.uuid),gap:5,alignItems:"center",borderRadius:15,children:[t(x,{noOfLines:[1],children:[r.structureCode," - ",r.name]}),e(ue,{color:r.total_questions>0&&"brand.light"})]})})},[d,s]);return t(ee,{children:[t(re,{children:[t(_,{justifyContent:"space-between",alignItems:"center",children:[e(x,{fontWeight:"medium",fontSize:19,children:"Unit Kerja"}),e(w,{label:"Atur Template",children:e(Q,{"aria-label":"Add Questioner",onClick:()=>{C(O(e(hr,{projectId:n}),"Atur Template Pertanyaan per Unit kerja","lg"))},icon:e(be,{}),variant:"outline",border:"none"})})]}),e("small",{children:"Centang dua hijau : sudah diatur pertanyaan"})]}),t(te,{children:[e(ne,{onChange:r=>{r.preventDefault(),l(r.target.value)}}),t(M,{mt:3,children:[b&&e(ve,{}),i&&"Loading...",p&&(c==null?void 0:c.structures)&&(c==null?void 0:c.structures.length)>0?h===""||!h?xe("uuid","parent_id",c==null?void 0:c.structures).map(r=>S(r,0)):c==null?void 0:c.structures.map(r=>S(r,0)):e(F,{})]})]})]})},fr=({initialValues:n={project_description:null,project_name:null,project_status:null,project_code:null,project_type:null,project_due_date:null},isLoading:d=!1,onSubmit:a})=>{const o=G();return t(Pe,{initialValues:n,onSubmit:a,id:"form-project-info",children:[e(M,{p:5,children:e(Oe,{disabled:{project_type:!0}})}),e(ae,{children:t(_,{alignItems:"center",gap:5,children:[e(L,{variant:"outline",colorScheme:"red",size:"sm",onClick:()=>o(V()),children:"Cancel"}),e(L,{type:"submit",variant:"solid",isLoading:d,size:"sm",leftIcon:e(ir,{}),children:"Submit"})]})})]})},br=me.forwardRef(({name:n,onChange:d,onBlur:a,value:o,placeholder:l,projectId:s,isMulti:C=!1},h)=>{const[c,i]=k.exports.useState(""),p=A(c,1e3),{fetchNextPage:b,hasNextPage:S,isError:y,isSuccess:r,isLoading:P,data:j}=$(["fetch_select_structure_by_project_primitive",p,s],({pageParam:g=1})=>oe({current:g,search:p,value:o==null?void 0:o.value,project:+s,pageSize:15}),{enabled:!!s,refetchOnMount:!1,refetchOnWindowFocus:!1,getNextPageParam:g=>Ce(g),getPreviousPageParam:g=>je(g)}),m=q({isSuccess:r,data:j!=null?j:{pages:[],pageParams:[]},key:"structures",returnList:g=>({label:g.name,value:g.uuid})});return e(_e,{name:n,ref:h,onChange:d,onBlur:a,value:o,isMulti:C,onInputChange:i,isLoading:P,isClearable:!0,noOptionsMessage:({inputValue:g})=>e("div",{children:"Tidak ada pilihan"}),loadingMessage:({inputValue:g})=>t(H,{children:[t("div",{children:['Mencari "',g,'"']}),P&&e(he,{size:"xs",width:"100%",isIndeterminate:!0}),y&&e("div",{children:"Error saat mencari data"})]}),options:m,placeholder:e(x,{noOfLines:[1],children:l}),closeMenuOnScroll:!0,isSearchable:!0,onMenuScrollToBottom:()=>{S&&b()},closeMenuOnSelect:!0})}),Sr=({project_id:n})=>{const{control:d,formState:a}=or();return t(H,{children:[e(ce,{control:d,name:"job",formState:a,id:"job",placeholder:"-- Pilih Pekerjaan --",rules:{required:{value:!0,message:"Dibutuhkan"},min:{value:1,message:"Dibutuhkan"}},children:e(de,{children:e(Ge,{type_:"PROJECT_JOB",isMulti:!0})})}),e(ce,{control:d,name:"unit_kerja",formState:a,id:"unit_kerja",placeholder:"-- Pilih Unit Kerja --",rules:{required:{value:!0,message:"Dibutuhkan"}},children:e(de,{children:e(br,{projectId:n,isMulti:!0})})})]})},vr=({projectId:n})=>{const[d,a]=k.exports.useState(),[o,l]=k.exports.useState([]),s=A(d,200),{data:C,isLoading:h,isSuccess:c,isError:i,hasNextPage:p,fetchNextPage:b}=$(["assign_users",s],({pageParam:r})=>ar({pageSize:20,current:r,search:s})),S=q({isSuccess:c,data:C!=null?C:{pages:[],pageParams:[]},key:"users",filterFn:r=>r.roleId!==1,returnList:r=>{var P,j;return{label:t(_,{gap:2,alignItems:"center",children:[e(E,{size:"xs",objectFit:"cover",name:(P=r.full_name)!=null?P:"",src:r.profile_pict?`/api/v1/profiles/${r.profile_pict}`:"/default-image.jpg"}),e(x,{fontSize:"sm",children:(j=r.full_name)!=null?j:""})]}),value:JSON.stringify(r)}}}),y=r=>{l(r?["all"]:[])};return t(Pe,{onSubmit:console.log,id:"form-assign",children:[e(M,{p:5,children:t(_,{flexDirection:"column",gap:5,children:[e(Sr,{project_id:n}),e(ne,{onChange:r=>{r.preventDefault(),a(r.target.value)}}),e(ie,{value:"all",onChange:r=>y(r.target.checked),children:"Semua"}),o&&o.length>0&&!o.includes("all")&&e(M,{children:t(_,{gap:3,alignItems:"center",children:[t(x,{fontSize:"sm",children:["Terpilih ",o.length," User "]}),e(L,{variant:"link",colorScheme:"red",size:"sm",onClick:()=>l([]),children:"Hapus Pilihan"})]})}),t(M,{maxH:500,overflowY:"auto",children:[h&&e(Se,{w:"100%",h:20}),i&&e(x,{children:"Error"}),c&&!o.includes("all")&&e(Ie,{options:S,direction:"column",value:o,disabled:o.includes("all"),onChange:l})]}),p&&e(_,{justifyContent:"center",w:"100%",children:e(L,{size:"sm",onClick:()=>b(),children:"Load More"})})]})}),e(ae,{children:e(L,{type:"submit",children:"Simpan"})})]})},Cr=k.exports.lazy(()=>De(()=>import("./Questionaire.32f346b6.js"),["assets/Questionaire.32f346b6.js","assets/index.36e5c8e0.js","assets/index.df73d61f.css","assets/PagePadding.1c9da704.js","assets/Detailinformation.c7d0c3e1.js","assets/CommentsIcon.642429a2.js","assets/FileIcon.df2dfc6b.js","assets/dayjs.min.9509b64d.js","assets/index.esm.08b5451d.js","assets/index.esm.f0e9f4ce.js","assets/slicedToArray.69cafb3e.js","assets/index.esm.4c8c0183.js","assets/index.esm.c218bf3a.js","assets/index.esm.9df59221.js","assets/EditIcon.d610a85a.js","assets/FormFieldControl.2c89898e.js","assets/index.esm.0f58bf09.js","assets/index.238261e4.js","assets/FieldTextArea.c0a8f160.js","assets/index.esm.5ccae681.js","assets/FieldText.f9548c3f.js","assets/FieldCustom.a580ac8f.js","assets/useSelectDataMapper.533313d1.js","assets/useDebounce.3f476afc.js","assets/usersActions.aa8d3840.js","assets/select.3b6ee5a4.js","assets/objectWithoutPropertiesLoose.2d2ba74a.js","assets/projectActions.d0ab648c.js","assets/FilterIcon.742ec280.js","assets/ErrorFetching.f00243df.js","assets/useTranslation.7b5c047c.js","assets/useError.dc03fcf4.js","assets/ArrowLeftIcon.59577fdf.js","assets/questionActions.2bac5b0b.js","assets/ErrorEmpty.98242666.js"])),ut=()=>{const{id:n}=ze(),d=ge(),a=G(),o=Ee(),[l,s]=k.exports.useState(null),C=k.exports.useRef(null),h=Z($e),c=Z(qe),{data:i,isLoading:p,isSuccess:b,isError:S,refetch:y}=fe(["project_detail",n],()=>We(+n),{enabled:!!n}),r=f=>{c.mutate(f,{onSuccess:v=>{d({status:"success",title:"Success",isClosable:!0,description:v.message,position:"top"}),a(V()),o("/activity/projects")},onError:v=>X(v,d)})},P=f=>{a(O(e(nr,{onDelete:()=>r(f)}),"Apakah kamu yakin ingin menghapus project ini ?","sm"))},j=f=>{h.mutate({id:n,payload:{project_code:f.project_code,project_description:f.project_description,project_due_date:f.project_due_date,project_name:f.project_name,project_status:f.project_status.value,project_type:f.project_type.value}},{onSuccess:v=>{d({status:"success",title:"Success",description:v.message,position:"top",isClosable:!0}),a(V()),y()},onError:v=>X(v,d)})},m=()=>{a(O(e(fr,{onSubmit:j,isLoading:h.isLoading,initialValues:{project_description:i.data.description,project_name:i.data.name,project_status:{label:i.data.select_status_label,value:i.data.status},project_code:i.data.project_code,project_type:{label:i.data.select_project_type_label,value:i.data.type},project_due_date:new Date(i.data.project_date)}}),"Edit Project","lg"))},g=f=>{var v;s(f),(v=C.current)==null||v.removeFilterQuestions()},D=()=>{a(O(e(vr,{projectId:n}),"Atur User per Unit Kerja","md"))};return t(Fe,{title:"Detail Projek ",children:[p&&e(le,{}),b&&t(H,{children:[e(Ae,{label:i.data.name,useBackButton:!0,additional:t(_,{alignItems:"center",gap:2,children:[e(se,{variant:"subtle",colorScheme:"blue",children:i.data.type}),e(se,{variant:"subtle",colorScheme:"green",children:i.data.status})]})}),t(we,{x:6,children:[t(U,{templateColumns:{base:"repeat(1,1fr)",md:"repeat(2,1fr)"},gap:5,mb:5,children:[e(I,{children:e(ur,{data:i.data,onEdit:m,onDelete:()=>P(+n)})}),e(I,{children:e(pr,{})})]}),t(U,{templateColumns:"repeat(6,1fr)",gap:5,children:[e(I,{colSpan:{base:6,lg:6,xl:2},children:e(gr,{projectId:n,onClick:f=>g(f),active:l})}),t(I,{colSpan:{base:6,lg:6,xl:4},children:[t(_,{alignItems:"center",gap:2,children:[e(x,{fontWeight:"semibold",children:"Assigned User"}),e(Q,{"aria-label":"Add Assigned User",fontSize:26,onClick:D,variant:"outline",borderRadius:50,icon:e(be,{})}),t(Ve,{size:"md",max:2,children:[e(E,{name:"Ryan Florence",src:"https://bit.ly/ryan-florence"}),e(E,{name:"Segun Adebayo",src:"https://bit.ly/sage-adebayo"}),e(E,{name:"Kent Dodds",src:"https://bit.ly/kent-c-dodds"}),e(E,{name:"Prosper Otemuyiwa",src:"https://bit.ly/prosper-baba"}),e(E,{name:"Christian Nwamba",src:"https://bit.ly/code-beast"})]})]}),t(lr,{children:[t(sr,{overflowX:"auto",overflowY:"hidden",children:[e(B,{children:"Questioner"}),e(B,{children:"Inventory"}),e(B,{children:"Volume"}),e(B,{children:"Log Activity"})]}),t(cr,{children:[e(N,{children:l?e(k.exports.Suspense,{fallback:e(le,{}),children:e(Cr,{ref:C,structuresId:l,projectId:+n,editable:!0})}):e(F,{})}),e(N,{children:e(F,{})}),e(N,{children:e(F,{})}),e(N,{children:e(F,{})})]})]})]})]})]})]}),S&&e(ve,{})]})};export{ut as default};
