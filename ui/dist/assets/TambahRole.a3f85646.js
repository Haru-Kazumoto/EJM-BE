import{a as f,P as g}from"./PagePadding.fe6bb864.js";import{P as E}from"./PageHeader.23346c39.js";import{a as b}from"./FormFieldControl.d2cb8e1b.js";import{u as h,F as I,C as o}from"./FormFieldRole.3db901db.js";import{S as R}from"./SaveIcon.a2d13dd6.js";import{a2 as S,c as C,aa as P,j as i,a as s,h as T}from"./index.4b216aca.js";import{c as v}from"./rolesActions.5aa1c308.js";import{u as x,E as y}from"./useError.334228ec.js";import{B as A}from"./index.esm.5a92b727.js";import"./ArrowLeftIcon.68b2803c.js";import"./FieldText.7148c9fc.js";import"./index.esm.7bee6ed9.js";import"./FieldCustom.044af5e5.js";import"./FieldSwitch.f2fa3f8b.js";import"./index.esm.14d70c7e.js";const G=()=>{const{items:r,isLoading:u,isSuccess:c}=h(),m=S(),p=C(),d=P(),n=x(v);return i(f,{title:"Tambah Role",children:[s(E,{label:"Tambah Role",useBackButton:!0}),i(g,{x:6,children:[u&&s(T,{}),c&&i(b,{onSubmit:a=>{let l=[];a.menus.filter(e=>e.type==="menu"&&(e.state===o.CHECKED||e.state===o.INDETERMINATE)).map(e=>{l.push({menuId:e.id,apiId:a.menus.filter(t=>t.type==="api"&&e.parentId===t.id&&(t.state===o.CHECKED||t.state===o.INDETERMINATE)).map(t=>t.id)})}),n.mutate({name:a.name,active:a.active,actionApi:l,objectActions:a.menus},{onSuccess:e=>{m({title:"Success",description:e.message,position:"top",status:"success",isClosable:!0}),d.invalidateQueries(["roles"]),p("/management/roles")},onError:e=>y(e,m)})},id:"form-role",initialValues:{name:null,active:!1,menus:r},children:[s(I,{items:r}),s(A,{type:"submit",mt:5,leftIcon:s(R,{}),isLoading:n.isLoading,children:"Submit"})]})]})]})};export{G as default};
