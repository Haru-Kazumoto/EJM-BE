import{a_ as h,c as b,a2 as P,aa as _,r as y,f as S,j as u,a as e}from"./index.36e5c8e0.js";import{P as Q}from"./PageHeader.f142dabc.js";import{a as T}from"./FormFieldControl.2c89898e.js";import{a as x,P as p}from"./PagePadding.1c9da704.js";import{S as E}from"./SaveIcon.87f3069f.js";import{F as I}from"./FormFieldQuestion.23d23bd4.js";import{b as k,c as B}from"./questionActions.2bac5b0b.js";import{u as C,E as d}from"./useError.dc03fcf4.js";import{B as F}from"./index.esm.c218bf3a.js";import"./ArrowLeftIcon.59577fdf.js";import"./FieldText.f9548c3f.js";import"./index.esm.0f58bf09.js";import"./FieldSwitch.626f7d9c.js";import"./index.esm.adaa90cb.js";import"./index.esm.9df59221.js";import"./index.238261e4.js";import"./AddIcon.e50b4361.js";import"./FormFieldAnswerQuestions.2a93b55b.js";import"./DeleteIcon.1e8d691c.js";import"./FieldSelect.1fa99dbd.js";import"./select.3b6ee5a4.js";import"./slicedToArray.69cafb3e.js";import"./index.esm.4c8c0183.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./index.esm.f0e9f4ce.js";const it=()=>{const[a]=h(),s=b(),o=P(),c=_(),f=C(B),g=i=>{var r;const v={...i,is_mandatory:(r=i.is_mandatory)!=null?r:!1,options:i.options.map(t=>{var n;return{...t,conditions:t.conditions.length>0?t.conditions.map(m=>{var l;return{...m,is_mandatory:(l=m.is_mandatory)!=null?l:!1}}):[],value:(n=t.value)==null?void 0:n.value}})};f.mutate({data:v,templateId:a.get("template_id")},{onSuccess:t=>{o({status:"success",title:"Sukses",description:t.message,position:"top",isClosable:!0}),c.invalidateQueries(["questions"]),s(-1)},onError:t=>d(t,o)})};return y.exports.useEffect(()=>{a.get("template_id")||(o({status:"error",title:"error",description:"Invalid template id",isClosable:!0,position:"top"}),s(-1))},[]),S(["detail_template",a.get("template_id")],()=>k(+a.get("template_id")),{onError:i=>{d(i,o),s(-1)},enabled:!!a.get("template_id"),cacheTime:0,keepPreviousData:!1}),u(x,{title:"Tambah Pertanyaan",children:[e(Q,{label:"Tambah Pertanyaan",useBackButton:!0}),e(p,{x:6,children:u(T,{onSubmit:g,id:"form-questions",initialValues:{name:null,is_mandatory:!1,options:[{conditions:[],name:"Ya",value:{label:"1",value:1}},{conditions:[],name:"Tidak",value:{label:"0",value:0}}]},children:[e(I,{}),e(p,{x:6,children:e(F,{type:"submit",leftIcon:e(E,{}),mt:5,children:"Save"})})]})})]})};export{it as default};
