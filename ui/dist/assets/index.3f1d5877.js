import{c as L,aa as M,a2 as O,e as N,r as y,f as Q,R,a as t,ah as $,j as c,F as H,D as V,B as D}from"./index.d5331035.js";import{a as q,P as W}from"./PagePadding.6a89d5ea.js";import{P as G}from"./PageHeader.80f62234.js";import{U as J}from"./UserIcon.0228f69f.js";import{B as X}from"./BeTable.a97dc5da.js";import{A as Y}from"./AddIcon.20457492.js";import{g as Z}from"./TableCheckbox.8dd96db4.js";import{U as w}from"./useTableHelper.211b8ccc.js";import{d as ee,a as te,b as se}from"./usersActions.d6b8993a.js";import{E as ae}from"./EditIcon.553b3055.js";import{D as u}from"./DeleteIcon.ecb24de6.js";import{u as x,E as S}from"./useError.f7bb9bb4.js";import{o as I,c as U}from"./uiActions.b5ca2485.js";import{C as B}from"./ConfirmDelete.49d6298d.js";import{u as oe}from"./useTranslation.21f85c5c.js";import{B as i}from"./index.esm.50eb2b01.js";import{T as re}from"./index.esm.18904467.js";import"./ArrowLeftIcon.b96504a8.js";import"./FilterIcon.bbce048c.js";import"./index.esm.66c8b54e.js";import"./index.esm.4093ec2b.js";import"./slicedToArray.8f26b531.js";import"./index.esm.cabc1829.js";import"./index.esm.366f799e.js";import"./SearchInput.65ab3a3b.js";import"./Pagination.fd2c5f66.js";import"./ExpandLeftIcon.d6a7ba85.js";import"./ExpandRightIcon.da133232.js";import"./useDebounce.d3519829.js";import"./ExpandDownIcon.2adadf7a.js";import"./index.esm.b89e98a9.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./inheritsLoose.905f8955.js";const Ne=()=>{var _,C,k;const{t:e}=oe(["user","global"]),p=L(),{setPagination:v,searchValue:g,pagination:d,handleSearch:E}=w(),b=M(),P=x(ee),m=x(te),l=O(),n=N(),[r,h]=y.exports.useState({}),{data:a,isLoading:j}=Q(["users",{searchValue:g,...d}],()=>se({pageSize:d.pageSize,current:d.pageIndex+1,search:g}),{keepPreviousData:!1}),z=()=>p("/management/users/add"),T=s=>{P.mutate(s,{onSuccess:o=>{l({status:"success",title:"success",description:o.message,position:"top",isClosable:!0}),n(U()),b.invalidateQueries(["users"])},onError:o=>S(o,l)})},K=()=>{const s=Object.keys(r).map(o=>+o);m.mutate(s,{onSuccess:o=>{l({status:"success",title:"success",description:o.message,position:"top",isClosable:!0}),n(U()),b.invalidateQueries(["users"]),h({})},onError:o=>S(o,l)})},f=()=>{n(I(t(B,{onDelete:K}),e("modal.title.delete"),"sm"))},A=s=>{n(I(t(B,{onDelete:()=>T(s)}),e("modal.title.delete"),"sm"))},F=R.useMemo(()=>[{id:"checkbox",...Z({useCheckbox:!0})},{id:e("table_users.table_no"),header:e("table_users.table_no"),accessorFn:(s,o)=>o+1},{id:e("table_users.pict"),header:e("table_users.pict"),cell:({row:s})=>t("img",{src:s.original.profile_pict?`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_BACKEND_URL}/profiles/${s.original.profile_pict}`:"/images/default-image.jpg",alt:`Profile ${s.original.full_name}`,style:{borderRadius:50,border:"2px solid white",objectFit:"cover",width:40,height:40,maxWidth:40,maxHeight:40}})},{id:e("table_users.username"),header:e("table_users.username"),accessorKey:"username"},{id:e("table_users.name"),header:e("table_users.name"),accessorKey:"full_name"},{id:e("table_users.role"),header:e("table_users.role"),accessorKey:"role.name"},{id:e("table_users.status"),header:e("table_users.status"),accessorKey:"is_active",cell:({row:s})=>t($,{colorScheme:s.original.is_active?"green":"red",children:s.original.is_active?e("active"):e("nonactive")})},{id:e("table_users.action"),header:e("table_users.action"),cell:({row:s})=>t(y.exports.Fragment,{children:c(H,{gap:2,alignItems:"center",children:[t(i,{size:"sm",leftIcon:t(ae,{}),variant:"outline",onClick:()=>p(`/management/users/edit/${s.original.id}`),children:"Edit"}),t(i,{size:"sm",onClick:()=>A(s.original.id),leftIcon:t(u,{}),colorScheme:"red",children:"Delete"})]})})}],[e]);return c(q,{title:e("label"),children:[t(G,{label:e("label"),leftIcon:t(J,{fontSize:24}),additional:t(re,{label:"Add New User",children:t(i,{leftIcon:t(Y,{fontSize:20}),onClick:z,children:e("buttons.add")})})}),t(V,{}),t(W,{x:0,y:6}),t(X,{enableResizeColumn:!1,useSearchInput:!0,loading:j,onSearch:E,leftFilter:t(D,{display:{base:"none",md:"block"},children:c(i,{leftIcon:t(u,{}),colorScheme:"red",onClick:f,isLoading:m.isLoading,disabled:Boolean(Object.keys(r).length<1),children:["Delete ",Object.keys(r).length," data"]})}),bottomFilter:t(D,{display:{base:"block",md:"none"},children:c(i,{leftIcon:t(u,{}),colorScheme:"red",size:"xs",onClick:f,isLoading:m.isLoading,disabled:Boolean(Object.keys(r).length<1),children:["Delete ",Object.keys(r).length," data"]})}),rowKey:(s,o,ie)=>s==null?void 0:s.id,onChangeTable:v,pagination:{pageIndex:Number((_=a==null?void 0:a.page)!=null?_:0)-1,pageSize:Number((C=a==null?void 0:a.page_size)!=null?C:10)},pageCount:Number((k=a==null?void 0:a.page_count)!=null?k:0),onCheckboxChange:h,rowSelectionProps:r,totalRecords:a==null?void 0:a.total,data:a==null?void 0:a.users,columns:F})]})};export{Ne as default};
