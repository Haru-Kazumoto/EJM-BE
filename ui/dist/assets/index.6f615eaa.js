import{c as A,aa as L,a2 as N,e as O,r as C,f as Q,R as $,a as t,ah as H,j as c,F as q,D as R,B as x}from"./index.6a975b74.js";import{a as V,P as W}from"./PagePadding.7fee7082.js";import{P as G}from"./PageHeader.490c936a.js";import{U as J}from"./UserIcon.fe68b376.js";import{B as X}from"./BeTable.b3fcea36.js";import{A as Y}from"./AddIcon.0b969bdb.js";import{g as Z}from"./TableCheckbox.1145b5ca.js";import{U as w}from"./useTableHelper.d05b246a.js";import{d as ee,a as te,b as se}from"./usersActions.4a42df1a.js";import{E as ae}from"./EditIcon.186a823f.js";import{D as u}from"./DeleteIcon.34bb886e.js";import{u as S,E as D}from"./useError.842a716d.js";import{o as I,c as U}from"./uiActions.7b219c20.js";import{C as B}from"./ConfirmDelete.b6aea653.js";import{u as oe}from"./useTranslation.703fee9c.js";import{B as i}from"./index.esm.5c32f280.js";import{T as re}from"./index.esm.91b674ff.js";import"./ArrowLeftIcon.f8803d27.js";import"./FilterIcon.adce54b8.js";import"./index.esm.1d96a478.js";import"./index.esm.92b00b84.js";import"./slicedToArray.3357f2a5.js";import"./index.esm.63338ecb.js";import"./index.esm.58f73ea8.js";import"./SearchInput.2fc00442.js";import"./Pagination.3a225467.js";import"./ExpandLeftIcon.ab61f736.js";import"./ExpandRightIcon.93a93fc4.js";import"./useDebounce.64d51988.js";import"./ExpandDownIcon.6d1ed994.js";import"./index.esm.deba8792.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./inheritsLoose.3cbf9e94.js";const Oe=()=>{var _,k,y;const{t:e}=oe(["user","global"]),p=A(),{setPagination:v,searchValue:g,pagination:d,handleSearch:P}=w(),b=L(),j=S(ee),m=S(te),l=N(),n=O(),[r,h]=C.exports.useState({}),{data:a,isLoading:z}=Q(["users",{searchValue:g,...d}],()=>se({pageSize:d.pageSize,current:d.pageIndex+1,search:g}),{keepPreviousData:!1}),T=()=>p("/management/users/add"),E=s=>{j.mutate(s,{onSuccess:o=>{l({status:"success",title:"success",description:o.message,position:"top",isClosable:!0}),n(U()),b.invalidateQueries(["users"])},onError:o=>D(o,l)})},F=()=>{const s=Object.keys(r).map(o=>+o);m.mutate(s,{onSuccess:o=>{l({status:"success",title:"success",description:o.message,position:"top",isClosable:!0}),n(U()),b.invalidateQueries(["users"]),h({})},onError:o=>D(o,l)})},f=()=>{n(I(t(B,{onDelete:F}),e("modal.title.delete"),"sm"))},K=s=>{n(I(t(B,{onDelete:()=>E(s)}),e("modal.title.delete"),"sm"))},M=$.useMemo(()=>[{id:"checkbox",...Z({useCheckbox:!0})},{id:e("table_users.table_no"),header:e("table_users.table_no"),accessorFn:(s,o)=>o+1},{id:e("table_users.pict"),header:e("table_users.pict"),cell:({row:s})=>t("img",{src:s.original.profile_pict?`/api/v1/profiles/${s.original.profile_pict}`:"/images/default-image.jpg",alt:`Profile ${s.original.full_name}`,style:{borderRadius:50,border:"2px solid white",objectFit:"cover",width:40,height:40,maxWidth:40,maxHeight:40}})},{id:e("table_users.username"),header:e("table_users.username"),accessorKey:"username"},{id:e("table_users.name"),header:e("table_users.name"),accessorKey:"full_name"},{id:e("table_users.role"),header:e("table_users.role"),accessorKey:"role.name"},{id:e("table_users.status"),header:e("table_users.status"),accessorKey:"is_active",cell:({row:s})=>t(H,{colorScheme:s.original.is_active?"green":"red",children:s.original.is_active?e("active"):e("nonactive")})},{id:e("table_users.action"),header:e("table_users.action"),cell:({row:s})=>t(C.exports.Fragment,{children:c(q,{gap:2,alignItems:"center",children:[t(i,{size:"sm",leftIcon:t(ae,{}),variant:"outline",onClick:()=>p(`/management/users/edit/${s.original.id}`),children:"Edit"}),t(i,{size:"sm",onClick:()=>K(s.original.id),leftIcon:t(u,{}),colorScheme:"red",children:"Delete"})]})})}],[e]);return c(V,{title:e("label"),children:[t(G,{label:e("label"),leftIcon:t(J,{fontSize:24}),additional:t(re,{label:"Add New User",children:t(i,{leftIcon:t(Y,{fontSize:20}),onClick:T,children:e("buttons.add")})})}),t(R,{}),t(W,{x:0,y:6}),t(X,{enableResizeColumn:!1,useSearchInput:!0,loading:z,onSearch:P,leftFilter:t(x,{display:{base:"none",md:"block"},children:c(i,{leftIcon:t(u,{}),colorScheme:"red",onClick:f,isLoading:m.isLoading,disabled:Boolean(Object.keys(r).length<1),children:["Delete ",Object.keys(r).length," data"]})}),bottomFilter:t(x,{display:{base:"block",md:"none"},children:c(i,{leftIcon:t(u,{}),colorScheme:"red",size:"xs",onClick:f,isLoading:m.isLoading,disabled:Boolean(Object.keys(r).length<1),children:["Delete ",Object.keys(r).length," data"]})}),rowKey:(s,o,ie)=>s==null?void 0:s.id,onChangeTable:v,pagination:{pageIndex:Number((_=a==null?void 0:a.page)!=null?_:0)-1,pageSize:Number((k=a==null?void 0:a.page_size)!=null?k:10)},pageCount:Number((y=a==null?void 0:a.page_count)!=null?y:0),onCheckboxChange:h,rowSelectionProps:r,totalRecords:a==null?void 0:a.total,data:a==null?void 0:a.users,columns:M})]})};export{Oe as default};
