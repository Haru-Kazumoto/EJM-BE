import{aM as h,c as P,e as b,Y as y,r as _,g as S,j as u,a as t}from"./index.0e24cb86.js";import{P as Q}from"./PageHeader.55df2133.js";import{a as T}from"./FormFieldControl.6d022860.js";import{P as p}from"./PagePadding.f9f1bdac.js";import{S as x}from"./SaveIcon.a38dc1b6.js";import{P as E}from"./Page.b0ec3cd0.js";import{F as I}from"./FormFieldQuestion.9253eb2d.js";import{b as k,c as B}from"./questionActions.28a337fa.js";import{u as C,E as d}from"./useError.ed61bdd7.js";import{B as F}from"./index.esm.726820fc.js";import"./ArrowLeftIcon.12227cb3.js";import"./index.esm.008f63b2.js";import"./index.esm.25501534.js";import"./FieldText.629ceab0.js";import"./FieldSwitch.02ffd7e0.js";import"./index.esm.68da116c.js";import"./index.238261e4.js";import"./AddIcon.52f4e4fc.js";import"./FormFieldAnswerQuestions.7cf1f25d.js";import"./DeleteIcon.85510701.js";import"./FieldSelect.e91ecae3.js";import"./select.f59423ba.js";import"./slicedToArray.49cdadd5.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./index.esm.9fed1f3b.js";const ie=()=>{const[a]=h(),s=P(),o=b(),c=y(),f=C(B),g=i=>{var r;const v={...i,is_mandatory:(r=i.is_mandatory)!=null?r:!1,options:i.options.map(e=>{var n;return{...e,conditions:e.conditions.length>0?e.conditions.map(m=>{var l;return{...m,is_mandatory:(l=m.is_mandatory)!=null?l:!1}}):[],value:(n=e.value)==null?void 0:n.value}})};f.mutate({data:v,templateId:a.get("template_id")},{onSuccess:e=>{o({status:"success",title:"Sukses",description:e.message,position:"top",isClosable:!0}),c.invalidateQueries(["questions"]),s(-1)},onError:e=>d(e,o)})};return _.exports.useEffect(()=>{a.get("template_id")||(o({status:"error",title:"error",description:"Invalid template id",isClosable:!0,position:"top"}),s(-1))},[]),S(["detail_template",a.get("template_id")],()=>k(+a.get("template_id")),{onError:i=>{d(i,o),s(-1)},enabled:!!a.get("template_id"),cacheTime:0,keepPreviousData:!1}),u(E,{title:"Tambah Pertanyaan",children:[t(Q,{label:"Tambah Pertanyaan",useBackButton:!0}),t(p,{x:6,children:u(T,{onSubmit:g,id:"form-questions",initialValues:{name:null,is_mandatory:!1,options:[{conditions:[],name:"Ya",value:{label:"1",value:1}},{conditions:[],name:"Tidak",value:{label:"0",value:0}}]},children:[t(I,{}),t(p,{x:6,children:t(F,{type:"submit",leftIcon:t(x,{}),mt:5,children:"Save"})})]})})]})};export{ie as default};
