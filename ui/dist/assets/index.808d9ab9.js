import{c as E,a as e,j as a,aq as x,ar as n,F as i,T as c,aj as S,B as y,an as L,D as N,ak as M,r as P,g as O}from"./index.4df5dae3.js";import{P as Y}from"./Page.ce903aa1.js";import{P as z}from"./PageHeader.954bf5c1.js";import{u as B,A as V}from"./useSelector.9bf17deb.js";import{P as _}from"./PagePadding.8c1b0086.js";import{d as q}from"./dayjs.min.5d3dab01.js";import{C as T,a as v,c as F,b as R}from"./index.esm.a501b0bf.js";import{A as l,a as W}from"./index.esm.4a036cc6.js";import{T as G}from"./index.esm.2ca9b441.js";import{S as H}from"./SearchInput.7f0274ff.js";import{E as u}from"./ErrorEmpty.d1acacce.js";import{u as Q,a as U}from"./useSelectDataMapper.6391f061.js";import{u as K}from"./useDebounce.b8118708.js";import{T as X,a as J,b,c as Z}from"./index.esm.ad9d805c.js";import{B as ee}from"./index.esm.780dcd2c.js";import"./ArrowLeftIcon.0c9057ff.js";import"./slicedToArray.556cd5c1.js";import"./useTranslation.d56b7bba.js";const re=({data:r})=>{const s=E();return e(T,{_hover:{borderColor:"brand.light",borderWidth:2,boxSizing:"border-box"},onClick:()=>{s(`/activity/projects/questionaire/${r.project_code}?projectId=${r.project_id}&structureId=${r.structure_id}`)},cursor:"pointer",children:e(v,{children:a(x,{justifyContent:"space-between",gridTemplateColumns:{base:"repeat(1,1fr)",lg:"repeat(3,1fr)"},flexDirection:{base:"column",lg:"row"},gap:{base:5,lg:0},children:[e(n,{children:a(i,{gap:5,alignItems:"center",children:[e(l,{name:r.company_name,src:r.company_profile_pict?`/api/v1/profiles/${r.company_profile_pict}`:null}),a(i,{gap:1,flexDirection:"column",children:[e(G,{label:r.structure_name,children:e(c,{fontWeight:"semibold",fontSize:"lg",noOfLines:[1],children:r.structure_name})}),a(c,{fontWeight:"semibold",fontSize:"xs",children:["Assigned At : ",q(r.assigned_at).format("DD MMMM YYYY")]}),a(i,{gap:1,children:[e(S,{colorScheme:"blue",width:"min-content",children:r.project_type}),e(S,{colorScheme:"grey",width:"min-content",children:r.project_code})]})]})]})}),e(n,{justifySelf:{base:"start",lg:"center"},children:a(W,{size:{base:"sm",md:"md"},max:8,children:[e(l,{name:"Ryan Florence",src:"https://bit.ly/ryan-florence"}),e(l,{name:"Segun Adebayo",src:"https://bit.ly/sage-adebayo"}),e(l,{name:"Kent Dodds",src:"https://bit.ly/kent-c-dodds"}),e(l,{name:"Prosper Otemuyiwa",src:"https://bit.ly/prosper-baba"}),e(l,{name:"Christian Nwamba",src:"https://bit.ly/code-beast"})]})}),e(n,{children:a(y,{children:[e(c,{mb:1,children:"Progress"}),a(i,{alignItems:"center",gap:2,children:[e(L,{value:0,size:"xs",colorScheme:"green",flex:1}),e(c,{children:"0%"})]})]})})]})})})},k=({label:r,children:s,action:o})=>a(T,{maxH:350,children:[e(F,{children:r}),e(v,{overflowY:"auto",children:s}),e(N,{}),e(R,{children:"View All"})]}),f=({label:r,value:s})=>e(T,{children:a(v,{p:{base:2,md:5},children:[a(i,{gap:5,alignItems:"center",children:[e(y,{w:5,h:5,bg:"green.300",borderRadius:50}),e(c,{fontWeight:"medium",noOfLines:[1],children:r})]}),e(c,{fontSize:38,mt:5,textAlign:"center",children:s})]})}),ae=async({pageSize:r,current:s,search:o,user_id:p,job:d})=>{const m=o&&o!=""?`&search=${o}`:"";return(await M.get(`/assigned-tasks?page=${s!=null?s:1}&page_size=${r!=null?r:10}&user_id=${p}&job=${d}`+m)).data},A=["QUESTIONER","INVENTORY","VOLUME"],ve=()=>{const[r,s]=P.exports.useState(0),[o,p]=P.exports.useState(""),d=K(o,300),{id:m}=B(t=>t.session),{isSuccess:h,isLoading:I,isError:j,isFetchingNextPage:w,data:g,hasNextPage:D,fetchNextPage:$}=Q(["assigned_tasks",m,A[r],d],({pageParam:t=1})=>ae({user_id:+m,pageSize:10,search:d,job:A[r],current:t})),C=U({isSuccess:h,data:g!=null?g:{pages:[],pageParams:[]},key:"tasks",returnList:t=>e(re,{data:t})});return a(Y,{title:"Assigned Tasks",children:[e(z,{label:"Assigned Tasks",leftIcon:e(V,{fontSize:25})}),e(_,{x:6,children:a(x,{gridTemplateColumns:"repeat(7,1fr)",gap:5,children:[e(n,{colSpan:{base:7,"2xl":5},children:a(i,{flexDirection:"column",gap:5,children:[a(x,{gridTemplateColumns:{base:"repeat(1,1fr)",md:"repeat(3,1fr)"},gap:5,children:[e(n,{children:e(f,{label:"On Progress",value:0})}),e(n,{children:e(f,{label:"New Assigned",value:0})}),e(n,{children:e(f,{label:"Completed",value:0})})]}),a(X,{defaultIndex:0,onChange:t=>s(t),children:[a(J,{overflowX:"auto",overflowY:"hidden",children:[e(b,{children:"Questioner"}),e(b,{children:"Inventory"}),e(b,{children:"Volume"})]}),a(Z,{p:0,mt:5,children:[e(H,{onChange:t=>{t.preventDefault(),p(t.target.value)}}),e(_,{x:0,y:3}),I&&e(O,{}),j&&"Error Occured",h&&a(i,{gap:5,flexDirection:"column",children:[C.length>0?C:e(u,{}),D&&e(ee,{size:"sm",variant:"outline",onClick:()=>{$()},isLoading:w,children:"Load More.."})]})]})]})]})}),e(n,{colSpan:2,display:{base:"none","2xl":"block"},children:e(y,{position:"sticky",top:20,children:a(i,{flexDirection:"column",gap:5,children:[e(k,{label:"Aktivitas Terakhir",children:e(u,{})}),e(k,{label:"Komentar Terakhir",children:e(u,{})})]})})})]})})]})};export{ve as default};
