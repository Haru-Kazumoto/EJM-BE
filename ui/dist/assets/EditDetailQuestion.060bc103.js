import{P as Q}from"./PageHeader.23346c39.js";import{a as S}from"./FormFieldControl.d2cb8e1b.js";import{a as b,P as d}from"./PagePadding.fe6bb864.js";import{S as _}from"./SaveIcon.a2d13dd6.js";import{F as q}from"./FormFieldQuestion.bf397e88.js";import{u as x,e as B}from"./questionActions.e634d813.js";import{u as F,E as l}from"./useError.334228ec.js";import{aQ as I,c as j,a2 as k,aa as C,f as D,j as r,a as o,h as M}from"./index.4b216aca.js";import{E as L}from"./ErrorFetching.5aaab4d4.js";import{B as T}from"./index.esm.5a92b727.js";import"./ArrowLeftIcon.68b2803c.js";import"./FieldText.7148c9fc.js";import"./index.esm.7bee6ed9.js";import"./FieldSwitch.f2fa3f8b.js";import"./index.esm.14d70c7e.js";import"./AddIcon.5e9ce272.js";import"./FormFieldAnswerQuestions.5b9a90ba.js";import"./DeleteIcon.6851d7ae.js";import"./FieldSelect.d5ee9940.js";import"./select.7028a93f.js";import"./slicedToArray.634396bc.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./index.esm.e4b297a5.js";import"./index.esm.c68e2b11.js";import"./index.esm.685aa072.js";import"./useTranslation.a0b70d33.js";const ut=()=>{const{id:i}=I(),c=j(),e=k(),f=C(),g=F(x),v=t=>{var n;const E={...t,is_mandatory:(n=t.is_mandatory)!=null?n:!1,options:t.options.map(a=>{var m;return{...a,conditions:a.conditions.length>0?a.conditions.map(u=>{var p;return{...u,is_mandatory:(p=u.is_mandatory)!=null?p:!1}}):[],value:(m=a.value)==null?void 0:m.value}})};g.mutate({data:E,id:i},{onSuccess:a=>{e({status:"success",title:"Sukses",description:a.message,position:"top",isClosable:!0}),f.invalidateQueries(["questions"]),c(-1)},onError:a=>l(a,e)})},{data:s,isLoading:y,isSuccess:P,isError:h}=D(["detail_question",i],()=>B(i),{enabled:!!i,cacheTime:0,onError:t=>l(t,e),keepPreviousData:!1});return r(b,{title:"Edit Pertanyaan",children:[o(Q,{label:"Edit Pertanyaan",useBackButton:!0}),r(d,{x:6,children:[y&&o(M,{}),P&&r(S,{onSubmit:v,id:"form-questions",initialValues:{name:s.data.name,is_mandatory:s.data.isMandatory,options:s.data.answers.map(t=>({name:t.name,value:{label:t.value.toString(),value:t.value},conditions:t.conditions||[]}))},children:[o(q,{}),o(d,{x:6,children:o(T,{type:"submit",leftIcon:o(_,{}),mt:5,children:"Save"})})]}),h&&o(L,{})]})]})};export{ut as default};
