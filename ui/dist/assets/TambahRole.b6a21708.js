import{P as f}from"./Page.ce903aa1.js";import{P as g}from"./PageHeader.954bf5c1.js";import{P as E}from"./PagePadding.8c1b0086.js";import{a as b}from"./FormFieldControl.b614070a.js";import{u as I,F as R,C as a}from"./FormFieldRole.0b244631.js";import{S}from"./SaveIcon.2cbae624.js";import{a4 as h,c as C,ae as P,j as i,a as s,g as T}from"./index.4df5dae3.js";import{c as v}from"./rolesActions.b4e62bef.js";import{u as x,E as y}from"./useError.46aba7e3.js";import{B as A}from"./index.esm.780dcd2c.js";import"./ArrowLeftIcon.0c9057ff.js";import"./FieldText.6d44809e.js";import"./FieldCustom.5b6685a5.js";import"./FieldSwitch.781e4b70.js";import"./index.esm.17aaa28e.js";import"./index.238261e4.js";import"./menusAction.ed41850a.js";const O=()=>{const{items:r,isLoading:u,isSuccess:c}=I(),m=h(),p=C(),d=P(),n=x(v);return i(f,{title:"Tambah Role",children:[s(g,{label:"Tambah Role",useBackButton:!0}),i(E,{x:6,children:[u&&s(T,{}),c&&i(b,{onSubmit:o=>{let l=[];o.menus.filter(e=>e.type==="menu"&&(e.state===a.CHECKED||e.state===a.INDETERMINATE)).map(e=>{l.push({menuId:e.id,apiId:o.menus.filter(t=>t.type==="api"&&e.parentId===t.id&&(t.state===a.CHECKED||t.state===a.INDETERMINATE)).map(t=>t.id)})}),n.mutate({name:o.name,active:o.active,actionApi:l,objectActions:o.menus},{onSuccess:e=>{m({title:"Success",description:e.message,position:"top",status:"success",isClosable:!0}),d.invalidateQueries(["roles"]),p("/management/roles")},onError:e=>y(e,m)})},id:"form-role",initialValues:{name:null,active:!1,menus:r},children:[s(R,{items:r}),s(A,{type:"submit",mt:5,leftIcon:s(S,{}),isLoading:n.isLoading,children:"Submit"})]})]})]})};export{O as default};
