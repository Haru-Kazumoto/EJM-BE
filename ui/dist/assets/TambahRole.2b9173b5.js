import{a as f,P as g}from"./PagePadding.6046cab3.js";import{P as E}from"./PageHeader.36ca4136.js";import{a as b}from"./FormFieldControl.4d0de4ad.js";import{u as I,F as R,C as o}from"./FormFieldRole.0d06b7a0.js";import{S}from"./SaveIcon.2e65ab00.js";import{a4 as h,c as C,ac as P,j as i,a,g as T}from"./index.94f4ac20.js";import{c as v}from"./rolesActions.a67f7e30.js";import{u as x,E as y}from"./useError.75f3b100.js";import{B as A}from"./index.esm.634a2674.js";import"./ArrowLeftIcon.479df347.js";import"./FieldText.54672b0b.js";import"./index.esm.ad9c0ced.js";import"./FieldCustom.e855dee4.js";import"./FieldSwitch.1cd22d97.js";import"./index.esm.67abfb3f.js";import"./index.238261e4.js";const J=()=>{const{items:r,isLoading:c,isSuccess:u}=I(),m=h(),p=C(),d=P(),n=x(v);return i(f,{title:"Tambah Role",children:[a(E,{label:"Tambah Role",useBackButton:!0}),i(g,{x:6,children:[c&&a(T,{}),u&&i(b,{onSubmit:s=>{let l=[];s.menus.filter(e=>e.type==="menu"&&(e.state===o.CHECKED||e.state===o.INDETERMINATE)).map(e=>{l.push({menuId:e.id,apiId:s.menus.filter(t=>t.type==="api"&&e.parentId===t.id&&(t.state===o.CHECKED||t.state===o.INDETERMINATE)).map(t=>t.id)})}),n.mutate({name:s.name,active:s.active,actionApi:l,objectActions:s.menus},{onSuccess:e=>{m({title:"Success",description:e.message,position:"top",status:"success",isClosable:!0}),d.invalidateQueries(["roles"]),p("/management/roles")},onError:e=>y(e,m)})},id:"form-role",initialValues:{name:null,active:!1,menus:r},children:[a(R,{items:r}),a(A,{type:"submit",mt:5,leftIcon:a(S,{}),isLoading:n.isLoading,children:"Submit"})]})]})]})};export{J as default};
