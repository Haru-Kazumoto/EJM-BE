import{P as f}from"./Page.b0ec3cd0.js";import{P as g}from"./PageHeader.55df2133.js";import{P as E}from"./PagePadding.f9f1bdac.js";import{a as b}from"./FormFieldControl.6d022860.js";import{u as h,F as I,C as a}from"./FormFieldRole.e20eb906.js";import{S as R}from"./SaveIcon.a38dc1b6.js";import{e as S,c as C,Y as P,j as i,a as s,h as T}from"./index.0e24cb86.js";import{c as v}from"./rolesActions.f6ba71e7.js";import{u as x,E as y}from"./useError.ed61bdd7.js";import{B as A}from"./index.esm.726820fc.js";import"./ArrowLeftIcon.12227cb3.js";import"./index.esm.008f63b2.js";import"./index.esm.25501534.js";import"./FieldText.629ceab0.js";import"./FieldCustom.a890d568.js";import"./FieldSwitch.02ffd7e0.js";import"./index.esm.68da116c.js";import"./index.238261e4.js";import"./menusAction.62a37d2d.js";const U=()=>{const{items:r,isLoading:p,isSuccess:u}=h(),m=S(),c=C(),d=P(),n=x(v);return i(f,{title:"Tambah Role",children:[s(g,{label:"Tambah Role",useBackButton:!0}),i(E,{x:6,children:[p&&s(T,{}),u&&i(b,{onSubmit:o=>{let l=[];o.menus.filter(e=>e.type==="menu"&&(e.state===a.CHECKED||e.state===a.INDETERMINATE)).map(e=>{l.push({menuId:e.id,apiId:o.menus.filter(t=>t.type==="api"&&e.parentId===t.id&&(t.state===a.CHECKED||t.state===a.INDETERMINATE)).map(t=>t.id)})}),n.mutate({name:o.name,active:o.active,actionApi:l,objectActions:o.menus},{onSuccess:e=>{m({title:"Success",description:e.message,position:"top",status:"success",isClosable:!0}),d.invalidateQueries(["roles"]),c("/management/roles")},onError:e=>y(e,m)})},id:"form-role",initialValues:{name:null,active:!1,menus:r},children:[s(I,{items:r}),s(A,{type:"submit",mt:5,leftIcon:s(R,{}),isLoading:n.isLoading,children:"Submit"})]})]})]})};export{U as default};
