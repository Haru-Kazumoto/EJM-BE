import{j as r,I as Q,a as e,aM as J,F as u,T as d,ap as k,aq as l,B as x,aN as O,aO as F,r as _,t as q,aP as ee,aQ as re,a2 as ne,e as te,c as oe,f as ie,h as $,ah as G}from"./index.2876ce8d.js";import{a as le,P as ae}from"./PagePadding.01ff7a41.js";import{P as ce}from"./PageHeader.af1fedb8.js";import{A as se}from"./AddIcon.21e4e8ec.js";import{E as de}from"./EditIcon.753e8825.js";import{D as v}from"./Detailinformation.43bb5ea1.js";import{B as me}from"./BuildingIcon.f190dc13.js";import{C as ue}from"./CalendarIcon.48645281.js";import{U as pe}from"./UserIcon.32fa6401.js";import{d as N}from"./dayjs.min.3b117df5.js";import{D as he}from"./DeleteIcon.d9371cb9.js";import{C as W,c as Y,a as Z}from"./index.esm.dab4bb8b.js";import{T as V}from"./index.esm.0a2c5d58.js";import{I as U}from"./index.esm.6e051443.js";import{A as S,a as fe}from"./index.esm.c24b0631.js";import{S as ge,E as M}from"./SearchInput.79f6c32e.js";import{E as Ce}from"./ExpandDownIcon.bb84ccf7.js";import{C as be}from"./index.esm.bd3da3a3.js";import{d as ve,a as ye}from"./projectActions.ff01effc.js";import{E as Ie}from"./ErrorFetching.e03724a6.js";import{u as je,E as Se}from"./useError.427e104a.js";import{o as Pe,c as xe}from"./uiActions.dd00498c.js";import{C as De}from"./ConfirmDelete.c5ee4243.js";import{T as Me,a as Te,b as T,c as Ee,d as E}from"./index.esm.844a80df.js";import"./ArrowLeftIcon.de388376.js";import"./slicedToArray.84b5158f.js";import"./useTranslation.251d09d2.js";import"./index.esm.f54768d8.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./inheritsLoose.982e29e1.js";import"./index.esm.d399955a.js";const z=({...n})=>r(Q,{...n,children:[e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 5C3 4.44772 3.44772 4 4 4H16C16.5523 4 17 4.44772 17 5C17 5.55228 16.5523 6 16 6H4C3.44772 6 3 5.55228 3 5Z",fill:"currentColor"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 10C3 9.44772 3.44772 9 4 9H16C16.5523 9 17 9.44772 17 10C17 10.5523 16.5523 11 16 11H4C3.44772 11 3 10.5523 3 10Z",fill:"currentColor"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 15C9 14.4477 9.44772 14 10 14H16C16.5523 14 17 14.4477 17 15C17 15.5523 16.5523 16 16 16H10C9.44772 16 9 15.5523 9 15Z",fill:"currentColor"})]});var K={exports:{}};(function(n,p){(function(i,g){n.exports=g()})(J,function(){return function(i,g,s){i=i||{};var t=g.prototype,y={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function c(o,a,m,C){return t.fromToBase(o,a,m,C)}s.en.relativeTime=y,t.fromToBase=function(o,a,m,C,h){for(var b,D,A,R=m.$locale().relativeTime||y,w=i.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],X=w.length,P=0;P<X;P+=1){var f=w[P];f.d&&(b=C?s(o).diff(m,f.d,!0):m.diff(o,f.d,!0));var j=(i.rounding||Math.round)(Math.abs(b));if(A=b>0,j<=f.r||!f.r){j<=1&&P>0&&(f=w[P-1]);var B=R[f.l];h&&(j=h(""+j)),D=typeof B=="string"?B.replace("%d",j):B(j,a,f.l,A);break}}if(a)return D;var H=A?R.future:R.past;return typeof H=="function"?H(D):H.replace("%s",D)},t.to=function(o,a){return c(o,a,this,!0)},t.from=function(o,a){return c(o,a,this)};var I=function(o){return o.$u?s.utc():s()};t.toNow=function(o){return this.to(I(this),o)},t.fromNow=function(o){return this.from(I(this),o)}}})})(K);const ze=K.exports;N.extend(ze);const Le=({data:n,onDelete:p})=>r(W,{children:[e(Y,{children:r(u,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[e(d,{fontWeight:"medium",fontSize:19,children:"Project Info"}),r(u,{alignItems:"center",gap:2,children:[e(V,{label:"Edit Project Info",children:e(U,{"aria-label":"Edit",variant:"unstyled",icon:e(de,{fontSize:28,color:"yellow.400"})})}),e(V,{label:"Delete Project",children:e(U,{"aria-label":"Edit",variant:"unstyled",onClick:p,icon:e(he,{fontSize:28,color:"red.400"})})})]})]})}),e(Z,{children:r(k,{templateColumns:{base:"repeat(1,1fr)",md:"repeat(2,1fr)",xl:"repeat(3,1fr)"},gap:{base:5,md:2},children:[e(l,{children:e(v,{leftIcon:e(me,{fontSize:21}),label:"Company",value:r(u,{gap:2,alignItems:"center",children:[e(S,{size:"xs",objectFit:"cover",name:n.company.name,src:n.company.profile_pict?`api/v1/profiles/${n.company.profile_pict}`:"/default-image.jpg"}),e(d,{fontSize:12,children:n.company.name})]}),direction:"column"})}),e(l,{children:e(v,{leftIcon:e(z,{fontSize:21}),label:"Project Type",direction:"column",value:n.type})}),e(l,{children:e(v,{leftIcon:e(z,{fontSize:21}),label:"Project Status",direction:"column",value:n.status})}),e(l,{children:e(v,{leftIcon:e(z,{fontSize:21}),label:"Project Code",direction:"column",value:n.project_code})}),e(l,{children:e(v,{leftIcon:e(ue,{fontSize:21}),label:"Due Date",direction:"column",value:r("div",{children:[e(d,{children:N(n.project_date).format("DD MMMM YYYY")}),r("small",{children:["(",N(n.project_date).fromNow(),")"]})]})})}),e(l,{children:e(v,{leftIcon:e(pe,{fontSize:21}),label:"Assigned User",direction:"column",value:n.total_assigned_users.toString()})}),e(l,{colSpan:{base:0,xl:3},children:e(v,{leftIcon:e(z,{fontSize:21}),label:"Description",direction:"column",value:n.description})})]})})]}),ke=()=>r(W,{children:[e(Y,{children:e(d,{fontWeight:"medium",fontSize:19,children:"Task Progress"})}),e(Z,{children:r(k,{templateColumns:{base:"repeat(1,1fr)",xl:"repeat(3,1fr)"},gap:5,children:[e(l,{children:r(u,{flexDirection:"column",alignItems:"center",children:[r("div",{style:{marginBottom:2},children:[e(d,{children:"Questionaire"}),e("small",{children:"( 10 / 210 )"})]}),e(x,{children:e(O,{value:40,color:"green.400",size:150,children:e(F,{children:"40%"})})})]})}),e(l,{children:r(u,{flexDirection:"column",alignItems:"center",children:[r("div",{style:{marginBottom:2},children:[e(d,{children:"Inventory"}),e("small",{children:"( 10 / 50 )"})]}),e(x,{children:e(O,{value:20,color:"green.400",size:150,children:e(F,{children:"20%"})})})]})}),e(l,{children:r(u,{flexDirection:"column",alignItems:"center",children:[r("div",{style:{marginBottom:2},children:[e(d,{children:"Volumes"}),e("small",{children:"( 5 / 10 )"})]}),e(x,{children:e(O,{value:10,color:"green.400",size:150,children:e(F,{children:"10%"})})})]})})]})})]}),_e=({...n})=>e(Q,{...n,children:e("path",{d:"M5 15L12 8L19 15",stroke:"currentColor",fill:"transparent",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Ae=({...n})=>r(Q,{...n,children:[e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2929 15.7071C9.90237 15.3166 9.90237 14.6834 10.2929 14.2929L14.5858 10L10.2929 5.70711C9.90237 5.31658 9.90237 4.68342 10.2929 4.29289C10.6834 3.90237 11.3166 3.90237 11.7071 4.29289L16.7071 9.29289C17.0976 9.68342 17.0976 10.3166 16.7071 10.7071L11.7071 15.7071C11.3166 16.0976 10.6834 16.0976 10.2929 15.7071Z",fill:"currentColor"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.29289 15.7071C3.90237 15.3166 3.90237 14.6834 4.29289 14.2929L8.58579 10L4.29289 5.70711C3.90237 5.31658 3.90237 4.68342 4.29289 4.29289C4.68342 3.90237 5.31658 3.90237 5.70711 4.29289L10.7071 9.29289C11.0976 9.68342 11.0976 10.3166 10.7071 10.7071L5.70711 15.7071C5.31658 16.0976 4.68342 16.0976 4.29289 15.7071Z",fill:"currentColor"})]}),L=(n,p="0")=>n.filter(i=>i.parentId===p).map(i=>({...i,children:L(n,i.id)})),Re=({data:n,active:p,onSearch:i,onClick:g})=>{const s=(t,y=0)=>{var a,m;const[c,I]=_.exports.useState(!0),o=()=>I(!c);return(t==null?void 0:t.children)&&((a=t==null?void 0:t.children)==null?void 0:a.length)>0?r(q,{children:[r(u,{py:1,cursor:"pointer",justifyContent:"space-between",alignItems:"center",onClick:o,children:[e(d,{children:t.name}),c?e(_e,{}):e(Ce,{})]}),e(be,{in:c,animateOpacity:!0,children:e(x,{sx:{ml:3},children:(m=t==null?void 0:t.children)==null?void 0:m.map(C=>s(C,y+1))})})]}):r(u,{py:1,px:2,_hover:{backgroundColor:"rgba(104,211,145,0.35)"},backgroundColor:p===t.id?"rgba(104,211,145,0.35)":"none",cursor:"pointer",onClick:()=>g(t.id),justifyContent:"space-between",alignItems:"center",borderRadius:15,children:[e(d,{children:t.name}),e(Ae,{})]})};return r(W,{children:[e(Y,{children:e(d,{fontWeight:"medium",fontSize:19,children:"Company Structures"})}),r(Z,{children:[e(ge,{onChange:t=>{t.preventDefault(),i(t.target.value)}}),e(x,{mt:3,children:L(n)&&L(n).length>0&&L(n).map(t=>s(t,0))})]})]})},we=_.exports.lazy(()=>ee(()=>import("./Questionaire.19dcd84a.js"),["assets/Questionaire.19dcd84a.js","assets/index.2876ce8d.js","assets/index.df73d61f.css","assets/PagePadding.01ff7a41.js","assets/Detailinformation.43bb5ea1.js","assets/CommentsIcon.4b2bbe8f.js","assets/FileIcon.25600252.js","assets/dayjs.min.3b117df5.js","assets/index.esm.c24b0631.js","assets/index.esm.0a2c5d58.js","assets/slicedToArray.84b5158f.js","assets/index.esm.6e051443.js","assets/EditIcon.753e8825.js","assets/FormFieldControl.f97789c6.js","assets/index.esm.f54768d8.js","assets/index.esm.f2cdd8ab.js","assets/FieldTextArea.e0d22943.js","assets/FieldUpload.e9cdc230.js","assets/index.esm.dab4bb8b.js","assets/FieldText.471498f7.js","assets/FieldCustom.93c1e23b.js","assets/useSelectDataMapper.8f413d98.js","assets/useDebounce.efc0032c.js","assets/usersActions.f7318d6b.js","assets/select.c489a6c9.js","assets/objectWithoutPropertiesLoose.2d2ba74a.js","assets/index.esm.ae337b1d.js","assets/index.esm.d399955a.js","assets/SelectLookup.ab9414e1.js","assets/FilterIcon.b2078b68.js","assets/projectActions.ff01effc.js","assets/ErrorFetching.e03724a6.js","assets/useTranslation.251d09d2.js","assets/questionActions.04a5b17e.js","assets/FieldSwitch.dc4caf56.js","assets/SaveIcon.542131df.js","assets/useError.427e104a.js","assets/ArrowLeftIcon.de388376.js"])),hr=()=>{const{id:n}=re(),p=ne(),i=te(),g=oe(),[s,t]=_.exports.useState(null),y=je(ve),{data:c,isLoading:I,isSuccess:o,isError:a}=ie(["project_detail",n],()=>ye(+n),{enabled:!!n}),m=h=>{y.mutate(h,{onSuccess:b=>{p({status:"success",title:"Success",description:b.message,position:"top"}),i(xe()),g("/activity/projects")},onError:b=>Se(b,p)})},C=h=>{i(Pe(e(De,{onDelete:()=>m(h)}),"Apakah kamu yakin ingin menghapus project ini ?","sm"))};return r(le,{title:"Detail Projek ",children:[I&&e($,{}),o&&r(q,{children:[e(ce,{label:c.data.name,useBackButton:!0,additional:r(u,{alignItems:"center",gap:2,children:[e(G,{variant:"subtle",colorScheme:"blue",children:c.data.type}),e(G,{variant:"subtle",colorScheme:"green",children:c.data.status})]})}),r(ae,{x:6,children:[r(k,{templateColumns:{base:"repeat(1,1fr)",md:"repeat(2,1fr)"},gap:5,mb:5,children:[e(l,{children:e(Le,{data:c.data,onDelete:()=>C(+n)})}),e(l,{children:e(ke,{})})]}),r(k,{templateColumns:"repeat(6,1fr)",gap:5,children:[e(l,{colSpan:{base:6,lg:6,xl:2},children:e(Re,{data:c.data.company_structure,onClick:h=>t(h),active:s})}),r(l,{colSpan:{base:6,lg:6,xl:4},children:[r(u,{alignItems:"center",gap:2,children:[e(d,{fontWeight:"semibold",children:"Assigned User"}),e(U,{"aria-label":"Add Assigned User",fontSize:26,variant:"outline",borderRadius:50,children:e(se,{})}),r(fe,{size:"md",max:2,children:[e(S,{name:"Ryan Florence",src:"https://bit.ly/ryan-florence"}),e(S,{name:"Segun Adebayo",src:"https://bit.ly/sage-adebayo"}),e(S,{name:"Kent Dodds",src:"https://bit.ly/kent-c-dodds"}),e(S,{name:"Prosper Otemuyiwa",src:"https://bit.ly/prosper-baba"}),e(S,{name:"Christian Nwamba",src:"https://bit.ly/code-beast"})]})]}),r(Me,{children:[r(Te,{overflowX:"auto",overflowY:"hidden",children:[e(T,{children:"Questionaire"}),e(T,{children:"Inventory"}),e(T,{children:"Volume"}),e(T,{children:"Log Activity"})]}),r(Ee,{children:[e(E,{children:s?e(_.exports.Suspense,{fallback:e($,{}),children:e(we,{structuresId:s,projectId:+n,editable:!0})}):e(M,{})}),e(E,{children:e(M,{})}),e(E,{children:e(M,{})}),e(E,{children:e(M,{})})]})]})]})]})]})]}),a&&e(Ie,{})]})};export{hr as default};
