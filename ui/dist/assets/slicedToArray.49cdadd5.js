var H=Object.defineProperty;var X=(e,t,n)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var o=(e,t,n)=>(X(e,typeof t!="symbol"?t+"":t,n),n);import{G as Y,r as u,aa as q,ab as J,ac as Q}from"./index.0e24cb86.js";import{m as w}from"./index.esm.726820fc.js";function S(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var Z=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function _(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function U(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var k=typeof window<"u"?u.exports.useLayoutEffect:u.exports.useEffect,v=e=>e,$=class{constructor(){o(this,"descendants",new Map);o(this,"register",e=>{if(e!=null)return Z(e)?this.registerNode(e):t=>{this.registerNode(t,e)}});o(this,"unregister",e=>{this.descendants.delete(e);const t=S(Array.from(this.descendants.keys()));this.assignIndex(t)});o(this,"destroy",()=>{this.descendants.clear()});o(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})});o(this,"count",()=>this.descendants.size);o(this,"enabledCount",()=>this.enabledValues().length);o(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index));o(this,"enabledValues",()=>this.values().filter(e=>!e.disabled));o(this,"item",e=>{if(this.count()!==0)return this.values()[e]});o(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]});o(this,"first",()=>this.item(0));o(this,"firstEnabled",()=>this.enabledItem(0));o(this,"last",()=>this.item(this.descendants.size-1));o(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)});o(this,"indexOf",e=>{var n;var t;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1});o(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e)));o(this,"next",(e,t=!0)=>{const n=_(e,this.count(),t);return this.item(n)});o(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),a=_(r,this.enabledCount(),t);return this.enabledItem(a)});o(this,"prev",(e,t=!0)=>{const n=U(e,this.count()-1,t);return this.item(n)});o(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),a=U(r,this.enabledCount()-1,t);return this.enabledItem(a)});o(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=S(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const a={node:e,index:-1,...t};this.descendants.set(e,a),this.assignIndex(r)})}};function ee(){const e=u.exports.useRef(new $);return k(()=>()=>e.current.destroy()),e.current}var[te,L]=Y({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function ne(e){const t=L(),[n,r]=u.exports.useState(-1),a=u.exports.useRef(null);k(()=>()=>{!a.current||t.unregister(a.current)},[]),k(()=>{if(!a.current)return;const i=Number(a.current.dataset.index);n!=i&&!Number.isNaN(i)&&r(i)});const l=v(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(a.current),register:w(l,a)}}function de(){return[v(te),()=>v(L()),()=>ee(),a=>ne(a)]}var se=e=>e?"":void 0;function re(){const e=u.exports.useRef(new Map),t=e.current,n=u.exports.useCallback((a,l,i,d)=>{e.current.set(i,{type:l,el:a,options:d}),a.addEventListener(l,i,d)},[]),r=u.exports.useCallback((a,l,i,d)=>{a.removeEventListener(l,i,d),e.current.delete(i)},[]);return u.exports.useEffect(()=>()=>{t.forEach((a,l)=>{r(a.el,a.type,l,a.options)})},[r,t]),{add:n,remove:r}}function O(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function ce(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:a=!0,clickOnSpace:l=!0,onMouseDown:i,onMouseUp:d,onClick:f,onKeyDown:x,onKeyUp:h,tabIndex:g,onMouseOver:I,onMouseLeave:C,...T}=e,[c,A]=u.exports.useState(!0),[m,p]=u.exports.useState(!1),b=re(),K=s=>{!s||s.tagName!=="BUTTON"&&A(!1)},R=c?g:g||0,N=n&&!r,M=u.exports.useCallback(s=>{if(n){s.stopPropagation(),s.preventDefault();return}s.currentTarget.focus(),f==null||f(s)},[n,f]),E=u.exports.useCallback(s=>{m&&O(s)&&(s.preventDefault(),s.stopPropagation(),p(!1),b.remove(document,"keyup",E,!1))},[m,b]),V=u.exports.useCallback(s=>{if(x==null||x(s),n||s.defaultPrevented||s.metaKey||!O(s.nativeEvent)||c)return;const D=a&&s.key==="Enter";l&&s.key===" "&&(s.preventDefault(),p(!0)),D&&(s.preventDefault(),s.currentTarget.click()),b.add(document,"keyup",E,!1)},[n,c,x,a,l,b,E]),B=u.exports.useCallback(s=>{if(h==null||h(s),n||s.defaultPrevented||s.metaKey||!O(s.nativeEvent)||c)return;l&&s.key===" "&&(s.preventDefault(),p(!1),s.currentTarget.click())},[l,c,n,h]),y=u.exports.useCallback(s=>{s.button===0&&(p(!1),b.remove(document,"mouseup",y,!1))},[b]),j=u.exports.useCallback(s=>{if(s.button!==0)return;if(n){s.stopPropagation(),s.preventDefault();return}c||p(!0),s.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",y,!1),i==null||i(s)},[n,c,i,b,y]),z=u.exports.useCallback(s=>{s.button===0&&(c||p(!1),d==null||d(s))},[d,c]),F=u.exports.useCallback(s=>{if(n){s.preventDefault();return}I==null||I(s)},[n,I]),G=u.exports.useCallback(s=>{m&&(s.preventDefault(),p(!1)),C==null||C(s)},[m,C]),P=w(t,K);return c?{...T,ref:P,type:"button","aria-disabled":N?void 0:n,disabled:N,onClick:M,onMouseDown:i,onMouseUp:d,onKeyUp:h,onKeyDown:x,onMouseOver:I,onMouseLeave:C}:{...T,ref:P,role:"button","data-active":se(m),"aria-disabled":n?"true":void 0,tabIndex:N?void 0:R,onClick:M,onMouseDown:j,onMouseUp:z,onKeyUp:B,onKeyDown:V,onMouseOver:F,onMouseLeave:G}}function fe(e){const{wasSelected:t,enabled:n,isSelected:r,mode:a="unmount"}=e;return!!(!n||r||a==="keepMounted"&&t)}function ae(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,l,i,d=[],f=!0,x=!1;try{if(l=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;f=!1}else for(;!(f=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);f=!0);}catch(h){x=!0,a=h}finally{try{if(!f&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(x)throw a}}return d}}function be(e,t){return q(e)||ae(e,t)||J(e,t)||Q()}export{be as _,de as c,fe as l,ce as u};
