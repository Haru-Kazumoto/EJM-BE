import{P as j}from"./Page.b0ec3cd0.js";import{P}from"./PageHeader.55df2133.js";import{P as p}from"./PagePadding.f9f1bdac.js";import{u as x,F as C,a as F}from"./FormFieldControl.6d022860.js";import{j as i,B as l,a as e,T as d,u as S,R as I,F as b,g as w,e as v,c as _,D as h,ar as g,as as m}from"./index.0e24cb86.js";import{F as k}from"./FormFieldProject.0365416c.js";import{F as B}from"./FieldCustom.a890d568.js";import{S as T}from"./SelectCompanies.20c05ae5.js";import{b as D}from"./companyActions.3310e078.js";import{Q as N}from"./QuestionIcon.6ba3c6f0.js";import{T as M}from"./index.esm.008f63b2.js";import{o as W}from"./projectActions.133a6b49.js";import{u as A,E}from"./useError.ed61bdd7.js";import{B as L}from"./index.esm.726820fc.js";import"./ArrowLeftIcon.12227cb3.js";import"./FieldText.629ceab0.js";import"./index.esm.25501534.js";import"./SelectLookup.9c949968.js";import"./useSelectDataMapper.c05d958f.js";import"./useDebounce.f82902b3.js";import"./select.f59423ba.js";import"./slicedToArray.49cdadd5.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./index.esm.9fed1f3b.js";import"./FieldTextArea.eda53a25.js";const f=({title:r,description:o})=>i(l,{children:[e(d,{fontWeight:"semibold",fontSize:{base:18,md:23},children:r}),e(d,{display:{base:"none",md:"block"},children:o})]}),y=({items:r=[],idsToRender:o=[],indentLevel:n=0})=>{const{colorMode:a}=S();o.length||(o=r.length>0&&r.filter(t=>!t.parentId||t.parentId=="0")||[]);const s=t=>{const u=r.filter(c=>c.parentId===t);return u.length?e(y,{items:r,indentLevel:n+1,idsToRender:u}):null};return i("ul",{style:{paddingLeft:n>0?20:0},children:[n<1&&r.length>1&&e(l,{width:.5,height:`calc(100% - ${r.length+38}px)`,bg:a==="light"?"black":"white",position:"absolute",left:0,top:3}),o.length>0&&o.map((t,u)=>{var c;return i(I.Fragment,{children:[i("li",{style:{marginBottom:5,marginLeft:10,display:"flex",gap:2,alignItems:"center"},children:[e(l,{width:`${20*(n+1)-15}px`,height:.5,bg:a==="light"?"black":"white",position:"absolute",left:0}),i(b,{gap:2,alignItems:"center",children:[e(d,{children:(c=t.structureName)!=null?c:t.name}),e(M,{label:"Scope of Works",children:e(l,{children:e(N,{})})})]})]}),e(p,{x:0,y:2}),s(t.id)]},t.id)})]})},Q=()=>{const{control:r,formState:o,watch:n}=x(),a=n("company_id"),{data:s,isSuccess:t}=w(["detail_company",a?a.value:null],()=>D(a?+a.value:null),{enabled:!!a});return i(b,{gap:5,flexDirection:"column",children:[e(C,{control:r,formState:o,label:"Pilih Company",id:"company_id",name:"company_id",rules:{required:{value:!0,message:"Dibutuhkan"}},children:e(B,{children:e(T,{})})}),e(d,{fontWeight:"bold",children:"Struktur Perusahaan"}),t&&e(l,{position:"relative",children:e(y,{items:s.data.structures})})]})},pe=()=>{const r=A(W),o=v(),n=_();return e(j,{title:"Tambah Project baru",children:i(F,{onSubmit:s=>{r.mutate({...s,project_type:s.project_type.value,project_status:s.project_status.value,company_id:s.company_id.value},{onSuccess:t=>{o({status:"success",title:"Success",position:"top",isClosable:!0,description:t.message}),n("/activity/projects")},onError:t=>E(t,o)})},id:"form-project",children:[e(P,{label:"Tambah Project Baru",useBackButton:!0}),e(h,{}),e(p,{x:6,y:6,children:i(g,{justifyContent:"space-between",alignItems:"center",templateColumns:{base:"repeat(1,1fr)",md:"repeat(3,1fr)"},gap:{base:5,md:0},children:[e(m,{children:e(f,{title:"Deskripsi Project",description:"Isi Informasi tentang project"})}),e(m,{colSpan:{base:3,md:2},children:e(k,{})})]})}),e(h,{}),e(p,{x:6,y:6,children:i(g,{justifyContent:"space-between",alignItems:"center",templateColumns:{base:"repeat(1,1fr)",md:"repeat(3,1fr)"},gap:{base:5,md:0},children:[e(m,{children:e(f,{title:"Perusahaan",description:"Pilih salah satu perusahaan"})}),e(m,{colSpan:{base:3,md:2},children:e(Q,{})})]})}),e(h,{}),e(p,{x:6,y:6,children:e(L,{variant:"solid",type:"submit",float:"right",isLoading:r.isLoading,children:"Simpan"})})]})})};export{pe as default};
