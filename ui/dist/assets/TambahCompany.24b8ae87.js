import{P as d}from"./Page.ce903aa1.js";import{P as y}from"./PageHeader.954bf5c1.js";import{P as n}from"./PagePadding.8c1b0086.js";import{a as C}from"./FormFieldControl.b614070a.js";import{F as g,a as b}from"./FormFieldCompanyStructure.04f80633.js";import{S as h}from"./SaveIcon.2cbae624.js";import{c as S}from"./companyActions.f4866318.js";import{u as P,E as p}from"./useError.46aba7e3.js";import{a4 as F,c as j,ae as v,j as l,a as t,D as f}from"./index.4df5dae3.js";import{B as x}from"./index.esm.780dcd2c.js";import"./ArrowLeftIcon.0c9057ff.js";import"./FieldText.6d44809e.js";import"./FileIcon.a3943f0b.js";import"./FieldSelect.70d2789f.js";import"./select.0fe29549.js";import"./slicedToArray.556cd5c1.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./index.esm.f3b9d19a.js";import"./AddIcon.159dfaf4.js";import"./DeleteIcon.8cd44a6f.js";const G=()=>{const i=P(S),o=F(),m=j(),c=v();return l(d,{title:"Tambah Company",children:[t(y,{useBackButton:!0,label:"Tambah Company"}),t(n,{x:6,children:l(C,{onSubmit:s=>{const u=s.structures&&s.structures.length>0?s.structures.map(e=>({id:e.id,name:e.structureName,parentId:`${e.parentId}`})):[];if(!s.picture)i.mutate({...s,object_structures:u},{onSuccess:e=>{o({title:"Success",description:e.message,position:"top",status:"success",isClosable:!0}),c.invalidateQueries(["companies"]),m("/master/companies")},onError:e=>p(e,o)});else{const e=new FormData;for(const[r,a]of Object.entries(s))r==="picture"?e.append("file",a==null?void 0:a[0]):r==="structures"?e.append("object_structures_string",JSON.stringify(u)):e.append(r,a);i.mutate(e,{onSuccess:r=>{o({title:"Success",description:r.message,position:"top",status:"success",isClosable:!0}),c.invalidateQueries(["companies"]),m("/master/companies")},onError:r=>p(r,o)})}},id:"form-company",initialValues:{name:null,picture:null,structures:[]},children:[t(g,{}),t(n,{x:0,y:5,children:t(f,{})}),t(b,{}),t(n,{x:0,y:5,children:t(f,{})}),t(x,{mt:5,leftIcon:t(h,{}),type:"submit",isLoading:i.isLoading,children:"Save"})]})})]})};export{G as default};
