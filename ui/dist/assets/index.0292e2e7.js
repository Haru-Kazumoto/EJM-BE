import{c as L,e as K,a2 as Q,r as D,aa as U,f as $,R as H,a as e,j as l,F as R,D as V,B as S}from"./index.d5331035.js";import{a as q,P as W}from"./PagePadding.6a89d5ea.js";import{P as G}from"./PageHeader.80f62234.js";import{B as J}from"./BuildingIcon.a5d47661.js";import{B as X}from"./BeTable.a97dc5da.js";import{A as Y}from"./AddIcon.20457492.js";import{g as Z}from"./TableCheckbox.8dd96db4.js";import{d as w,a as ee,g as te}from"./companyActions.2bfd751f.js";import{U as oe}from"./useTableHelper.211b8ccc.js";import{D as d}from"./DeleteIcon.ecb24de6.js";import{E as ae}from"./EditIcon.553b3055.js";import{o as x,c as B}from"./uiActions.b5ca2485.js";import{C as I}from"./ConfirmDelete.49d6298d.js";import{u as P,E}from"./useError.f7bb9bb4.js";import{u as ie}from"./useTranslation.21f85c5c.js";import{B as n}from"./index.esm.50eb2b01.js";import"./ArrowLeftIcon.b96504a8.js";import"./FilterIcon.bbce048c.js";import"./index.esm.66c8b54e.js";import"./index.esm.4093ec2b.js";import"./slicedToArray.8f26b531.js";import"./index.esm.cabc1829.js";import"./index.esm.366f799e.js";import"./SearchInput.65ab3a3b.js";import"./Pagination.fd2c5f66.js";import"./ExpandLeftIcon.d6a7ba85.js";import"./ExpandRightIcon.da133232.js";import"./useDebounce.d3519829.js";import"./ExpandDownIcon.2adadf7a.js";import"./index.esm.b89e98a9.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./inheritsLoose.905f8955.js";const _e=()=>{var y,b,k;const{t:p}=ie(["company","global"]),u=L(),r=K(),{setPagination:j,searchValue:g,pagination:c,handleSearch:v}=oe(),s=Q(),[i,h]=D.exports.useState({}),f=U(),z=P(w),A=P(ee),{data:o,isLoading:N}=$(["companies",{searchValue:g,...c}],()=>te({pageSize:c.pageSize,current:c.pageIndex+1,search:g}),{keepPreviousData:!1}),T=()=>u("/master/companies/add"),F=t=>{z.mutate(t,{onSuccess:a=>{s({status:"success",title:"success",description:a.message,position:"top",isClosable:!0}),r(B()),f.invalidateQueries(["companies"])},onError:a=>E(a,s)})},M=()=>{const t=Object.keys(i).map(a=>+a);A.mutate(t,{onSuccess:a=>{s({status:"success",title:"success",description:a.message,position:"top",isClosable:!0}),r(B()),h({}),f.invalidateQueries(["companies"])},onError:a=>E(a,s)})},O=t=>{r(x(e(I,{onDelete:()=>F(t)}),p("modal.title.delete"),"sm"))},C=()=>{r(x(e(I,{onDelete:M}),p("modal.title.delete"),"sm"))},_=H.useMemo(()=>[{id:"checkbox",...Z({useCheckbox:!0})},{id:"No",width:"auto",header:"No",accessorFn:(t,a)=>a+1},{id:"Logo Perusahaan",header:"Logo Perusahaan",cell:({row:t})=>e("img",{src:t.original.profile_pict?`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_BACKEND_URL}/profiles/${t.original.profile_pict}`:"/images/default-image.jpg",alt:`Logo ${t.original.name}`,style:{borderRadius:50,border:"2px solid white",objectFit:"cover",width:40,height:40,maxWidth:40,maxHeight:40}})},{id:"Nama Perusahaan",header:"Nama Perusahaan",accessorKey:"name"},{id:"Total Struktur",header:"Total Struktur",cell:({row:t})=>{var a,m;return e("div",{children:(m=(a=t.original.structures)==null?void 0:a.length)!=null?m:0})}},{id:"Action",header:"Action",cell:({row:t})=>e(D.exports.Fragment,{children:l(R,{gap:2,alignItems:"center",children:[e(n,{size:"sm",leftIcon:e(ae,{}),variant:"outline",onClick:()=>u(`/master/companies/edit/${t.original.id}`),children:"Edit"}),e(n,{size:"sm",leftIcon:e(d,{}),onClick:()=>O(t.original.id),colorScheme:"red",children:"Delete"})]})})}],[]);return l(q,{title:"Company",children:[e(G,{label:"Company",leftIcon:e(J,{fontSize:20}),additional:e(n,{leftIcon:e(Y,{fontSize:20}),onClick:T,children:"Add Company"})}),e(V,{}),e(W,{x:0,y:6}),e(X,{data:(o==null?void 0:o.company)||[],onChangeTable:j,loading:N,onSearch:v,rowKey:(t,a,m)=>t==null?void 0:t.id,pagination:{pageIndex:Number((y=o==null?void 0:o.page)!=null?y:0)-1,pageSize:Number((b=o==null?void 0:o.page_size)!=null?b:10)},leftFilter:e(S,{display:{base:"none",md:"block"},children:l(n,{leftIcon:e(d,{}),colorScheme:"red",onClick:C,disabled:Boolean(Object.keys(i).length<1),children:["Delete ",Object.keys(i).length," data"]})}),bottomFilter:e(S,{display:{base:"block",md:"none"},children:l(n,{leftIcon:e(d,{}),colorScheme:"red",size:"xs",onClick:C,disabled:Boolean(Object.keys(i).length<1),children:["Delete ",Object.keys(i).length," data"]})}),pageCount:Number((k=o==null?void 0:o.page_count)!=null?k:0),columns:_,useSearchInput:!0,rowSelectionProps:i,onCheckboxChange:h,totalRecords:o==null?void 0:o.total})]})};export{_e as default};
