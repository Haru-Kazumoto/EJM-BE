import{j as r,I as Q,a as e,aM as J,F as u,T as d,ap as _,aq as l,B as x,aN as H,aO as U,r as k,t as K,aP as ee,aQ as re,a2 as ne,e as te,c as oe,f as ie,h as Z,ah as $}from"./index.d5331035.js";import{a as le,P as ae}from"./PagePadding.6a89d5ea.js";import{P as ce}from"./PageHeader.80f62234.js";import{A as se}from"./AddIcon.20457492.js";import{E as de}from"./EditIcon.553b3055.js";import{D as v}from"./Detailinformation.5aa86740.js";import{B as me}from"./BuildingIcon.a5d47661.js";import{C as ue}from"./CalendarIcon.568c63e9.js";import{U as pe}from"./UserIcon.0228f69f.js";import{d as N}from"./dayjs.min.1ac82686.js";import{D as he}from"./DeleteIcon.ecb24de6.js";import{C as V,c as W,a as Y}from"./index.esm.41a77411.js";import{T as G}from"./index.esm.18904467.js";import{I as F}from"./index.esm.50eb2b01.js";import{A as S,a as fe}from"./index.esm.62102add.js";import{S as ge,E}from"./SearchInput.65ab3a3b.js";import{E as Ce}from"./ExpandDownIcon.2adadf7a.js";import{C as be}from"./index.esm.b89e98a9.js";import{d as ve,a as ye}from"./projectActions.faa31347.js";import{E as Ie}from"./ErrorFetching.68e00ec4.js";import{u as je,E as Se}from"./useError.f7bb9bb4.js";import{o as Pe,c as xe}from"./uiActions.b5ca2485.js";import{C as De}from"./ConfirmDelete.49d6298d.js";import{T as Ee,a as Me,b as M,c as Te,d as T}from"./index.esm.7f7399aa.js";import"./ArrowLeftIcon.b96504a8.js";import"./slicedToArray.8f26b531.js";import"./useTranslation.21f85c5c.js";import"./index.esm.366f799e.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./inheritsLoose.905f8955.js";import"./index.esm.4093ec2b.js";const L=({...n})=>r(Q,{...n,children:[e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 5C3 4.44772 3.44772 4 4 4H16C16.5523 4 17 4.44772 17 5C17 5.55228 16.5523 6 16 6H4C3.44772 6 3 5.55228 3 5Z",fill:"currentColor"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 10C3 9.44772 3.44772 9 4 9H16C16.5523 9 17 9.44772 17 10C17 10.5523 16.5523 11 16 11H4C3.44772 11 3 10.5523 3 10Z",fill:"currentColor"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 15C9 14.4477 9.44772 14 10 14H16C16.5523 14 17 14.4477 17 15C17 15.5523 16.5523 16 16 16H10C9.44772 16 9 15.5523 9 15Z",fill:"currentColor"})]});var q={exports:{}};(function(n,p){(function(i,g){n.exports=g()})(J,function(){return function(i,g,s){i=i||{};var t=g.prototype,y={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function c(o,a,m,C){return t.fromToBase(o,a,m,C)}s.en.relativeTime=y,t.fromToBase=function(o,a,m,C,h){for(var b,D,R,A=m.$locale().relativeTime||y,B=i.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],X=B.length,P=0;P<X;P+=1){var f=B[P];f.d&&(b=C?s(o).diff(m,f.d,!0):m.diff(o,f.d,!0));var j=(i.rounding||Math.round)(Math.abs(b));if(R=b>0,j<=f.r||!f.r){j<=1&&P>0&&(f=B[P-1]);var w=A[f.l];h&&(j=h(""+j)),D=typeof w=="string"?w.replace("%d",j):w(j,a,f.l,R);break}}if(a)return D;var O=R?A.future:A.past;return typeof O=="function"?O(D):O.replace("%s",D)},t.to=function(o,a){return c(o,a,this,!0)},t.from=function(o,a){return c(o,a,this)};var I=function(o){return o.$u?s.utc():s()};t.toNow=function(o){return this.to(I(this),o)},t.fromNow=function(o){return this.from(I(this),o)}}})})(q);const Le=q.exports;N.extend(Le);const ze=({data:n,onDelete:p})=>r(V,{children:[e(W,{children:r(u,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[e(d,{fontWeight:"medium",fontSize:19,children:"Project Info"}),r(u,{alignItems:"center",gap:2,children:[e(G,{label:"Edit Project Info",children:e(F,{"aria-label":"Edit",variant:"unstyled",icon:e(de,{fontSize:28,color:"yellow.400"})})}),e(G,{label:"Delete Project",children:e(F,{"aria-label":"Edit",variant:"unstyled",onClick:p,icon:e(he,{fontSize:28,color:"red.400"})})})]})]})}),e(Y,{children:r(_,{templateColumns:{base:"repeat(1,1fr)",md:"repeat(2,1fr)",xl:"repeat(3,1fr)"},gap:{base:5,md:2},children:[e(l,{children:e(v,{leftIcon:e(me,{fontSize:21}),label:"Company",value:r(u,{gap:2,alignItems:"center",children:[e(S,{size:"xs",objectFit:"cover",name:n.company.name,src:n.company.profile_pict?`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_BACKEND_URL}/profiles/${n.company.profile_pict}`:"/default-image.jpg"}),e(d,{fontSize:12,children:n.company.name})]}),direction:"column"})}),e(l,{children:e(v,{leftIcon:e(L,{fontSize:21}),label:"Project Type",direction:"column",value:n.type})}),e(l,{children:e(v,{leftIcon:e(L,{fontSize:21}),label:"Project Status",direction:"column",value:n.status})}),e(l,{children:e(v,{leftIcon:e(L,{fontSize:21}),label:"Project Code",direction:"column",value:n.project_code})}),e(l,{children:e(v,{leftIcon:e(ue,{fontSize:21}),label:"Due Date",direction:"column",value:r("div",{children:[e(d,{children:N(n.project_date).format("DD MMMM YYYY")}),r("small",{children:["(",N(n.project_date).fromNow(),")"]})]})})}),e(l,{children:e(v,{leftIcon:e(pe,{fontSize:21}),label:"Assigned User",direction:"column",value:n.total_assigned_users.toString()})}),e(l,{colSpan:{base:0,xl:3},children:e(v,{leftIcon:e(L,{fontSize:21}),label:"Description",direction:"column",value:n.description})})]})})]}),_e=()=>r(V,{children:[e(W,{children:e(d,{fontWeight:"medium",fontSize:19,children:"Task Progress"})}),e(Y,{children:r(_,{templateColumns:{base:"repeat(1,1fr)",xl:"repeat(3,1fr)"},gap:5,children:[e(l,{children:r(u,{flexDirection:"column",alignItems:"center",children:[r("div",{style:{marginBottom:2},children:[e(d,{children:"Questionaire"}),e("small",{children:"( 10 / 210 )"})]}),e(x,{children:e(H,{value:40,color:"green.400",size:150,children:e(U,{children:"40%"})})})]})}),e(l,{children:r(u,{flexDirection:"column",alignItems:"center",children:[r("div",{style:{marginBottom:2},children:[e(d,{children:"Inventory"}),e("small",{children:"( 10 / 50 )"})]}),e(x,{children:e(H,{value:20,color:"green.400",size:150,children:e(U,{children:"20%"})})})]})}),e(l,{children:r(u,{flexDirection:"column",alignItems:"center",children:[r("div",{style:{marginBottom:2},children:[e(d,{children:"Volumes"}),e("small",{children:"( 5 / 10 )"})]}),e(x,{children:e(H,{value:10,color:"green.400",size:150,children:e(U,{children:"10%"})})})]})})]})})]}),ke=({...n})=>e(Q,{...n,children:e("path",{d:"M5 15L12 8L19 15",stroke:"currentColor",fill:"transparent",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Re=({...n})=>r(Q,{...n,children:[e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2929 15.7071C9.90237 15.3166 9.90237 14.6834 10.2929 14.2929L14.5858 10L10.2929 5.70711C9.90237 5.31658 9.90237 4.68342 10.2929 4.29289C10.6834 3.90237 11.3166 3.90237 11.7071 4.29289L16.7071 9.29289C17.0976 9.68342 17.0976 10.3166 16.7071 10.7071L11.7071 15.7071C11.3166 16.0976 10.6834 16.0976 10.2929 15.7071Z",fill:"currentColor"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.29289 15.7071C3.90237 15.3166 3.90237 14.6834 4.29289 14.2929L8.58579 10L4.29289 5.70711C3.90237 5.31658 3.90237 4.68342 4.29289 4.29289C4.68342 3.90237 5.31658 3.90237 5.70711 4.29289L10.7071 9.29289C11.0976 9.68342 11.0976 10.3166 10.7071 10.7071L5.70711 15.7071C5.31658 16.0976 4.68342 16.0976 4.29289 15.7071Z",fill:"currentColor"})]}),z=(n,p="0")=>n.filter(i=>i.parentId===p).map(i=>({...i,children:z(n,i.id)})),Ae=({data:n,active:p,onSearch:i,onClick:g})=>{const s=(t,y=0)=>{var a,m;const[c,I]=k.exports.useState(!0),o=()=>I(!c);return(t==null?void 0:t.children)&&((a=t==null?void 0:t.children)==null?void 0:a.length)>0?r(K,{children:[r(u,{py:1,cursor:"pointer",justifyContent:"space-between",alignItems:"center",onClick:o,children:[e(d,{children:t.name}),c?e(ke,{}):e(Ce,{})]}),e(be,{in:c,animateOpacity:!0,children:e(x,{sx:{ml:3},children:(m=t==null?void 0:t.children)==null?void 0:m.map(C=>s(C,y+1))})})]}):r(u,{py:1,px:2,_hover:{backgroundColor:"rgba(104,211,145,0.35)"},backgroundColor:p===t.id?"rgba(104,211,145,0.35)":"none",cursor:"pointer",onClick:()=>g(t.id),justifyContent:"space-between",alignItems:"center",borderRadius:15,children:[e(d,{children:t.name}),e(Re,{})]})};return r(V,{children:[e(W,{children:e(d,{fontWeight:"medium",fontSize:19,children:"Company Structures"})}),r(Y,{children:[e(ge,{onChange:t=>{t.preventDefault(),i(t.target.value)}}),e(x,{mt:3,children:z(n)&&z(n).length>0&&z(n).map(t=>s(t,0))})]})]})},Be=k.exports.lazy(()=>ee(()=>import("./Questionaire.9eaf68c2.js"),["assets/Questionaire.9eaf68c2.js","assets/index.d5331035.js","assets/index.df73d61f.css","assets/PagePadding.6a89d5ea.js","assets/Detailinformation.5aa86740.js","assets/CommentsIcon.838980c6.js","assets/FileIcon.1e15d970.js","assets/dayjs.min.1ac82686.js","assets/index.esm.62102add.js","assets/index.esm.18904467.js","assets/slicedToArray.8f26b531.js","assets/index.esm.50eb2b01.js","assets/EditIcon.553b3055.js","assets/FormFieldControl.99f86f5b.js","assets/index.esm.366f799e.js","assets/index.esm.cabc1829.js","assets/FieldTextArea.9f9d6dee.js","assets/FieldUpload.6c21e74d.js","assets/index.esm.41a77411.js","assets/FieldText.45c302a0.js","assets/FieldCustom.5a5ed46b.js","assets/useSelectDataMapper.6165c842.js","assets/useDebounce.d3519829.js","assets/usersActions.d6b8993a.js","assets/select.c3fc601f.js","assets/objectWithoutPropertiesLoose.2d2ba74a.js","assets/index.esm.66c8b54e.js","assets/index.esm.4093ec2b.js","assets/SelectLookup.0085f43c.js","assets/FilterIcon.bbce048c.js","assets/projectActions.faa31347.js","assets/ErrorFetching.68e00ec4.js","assets/useTranslation.21f85c5c.js","assets/questionActions.2cfe040f.js","assets/FieldSwitch.9acdb8d0.js","assets/SaveIcon.3da42341.js","assets/useError.f7bb9bb4.js","assets/ArrowLeftIcon.b96504a8.js"])),hr=()=>{const{id:n}=re(),p=ne(),i=te(),g=oe(),[s,t]=k.exports.useState(null),y=je(ve),{data:c,isLoading:I,isSuccess:o,isError:a}=ie(["project_detail",n],()=>ye(+n),{enabled:!!n}),m=h=>{y.mutate(h,{onSuccess:b=>{p({status:"success",title:"Success",description:b.message,position:"top"}),i(xe()),g("/activity/projects")},onError:b=>Se(b,p)})},C=h=>{i(Pe(e(De,{onDelete:()=>m(h)}),"Apakah kamu yakin ingin menghapus project ini ?","sm"))};return r(le,{title:"Detail Projek ",children:[I&&e(Z,{}),o&&r(K,{children:[e(ce,{label:c.data.name,useBackButton:!0,additional:r(u,{alignItems:"center",gap:2,children:[e($,{variant:"subtle",colorScheme:"blue",children:c.data.type}),e($,{variant:"subtle",colorScheme:"green",children:c.data.status})]})}),r(ae,{x:6,children:[r(_,{templateColumns:{base:"repeat(1,1fr)",md:"repeat(2,1fr)"},gap:5,mb:5,children:[e(l,{children:e(ze,{data:c.data,onDelete:()=>C(+n)})}),e(l,{children:e(_e,{})})]}),r(_,{templateColumns:"repeat(6,1fr)",gap:5,children:[e(l,{colSpan:{base:6,lg:6,xl:2},children:e(Ae,{data:c.data.company_structure,onClick:h=>t(h),active:s})}),r(l,{colSpan:{base:6,lg:6,xl:4},children:[r(u,{alignItems:"center",gap:2,children:[e(d,{fontWeight:"semibold",children:"Assigned User"}),e(F,{"aria-label":"Add Assigned User",fontSize:26,variant:"outline",borderRadius:50,children:e(se,{})}),r(fe,{size:"md",max:2,children:[e(S,{name:"Ryan Florence",src:"https://bit.ly/ryan-florence"}),e(S,{name:"Segun Adebayo",src:"https://bit.ly/sage-adebayo"}),e(S,{name:"Kent Dodds",src:"https://bit.ly/kent-c-dodds"}),e(S,{name:"Prosper Otemuyiwa",src:"https://bit.ly/prosper-baba"}),e(S,{name:"Christian Nwamba",src:"https://bit.ly/code-beast"})]})]}),r(Ee,{children:[r(Me,{overflowX:"auto",overflowY:"hidden",children:[e(M,{children:"Questionaire"}),e(M,{children:"Inventory"}),e(M,{children:"Volume"}),e(M,{children:"Log Activity"})]}),r(Te,{children:[e(T,{children:s?e(k.exports.Suspense,{fallback:e(Z,{}),children:e(Be,{structuresId:s,projectId:+n,editable:!0})}):e(E,{})}),e(T,{children:e(E,{})}),e(T,{children:e(E,{})}),e(T,{children:e(E,{})})]})]})]})]})]})]}),a&&e(Ie,{})]})};export{hr as default};
