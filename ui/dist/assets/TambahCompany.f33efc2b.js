import{P as d}from"./Page.b0ec3cd0.js";import{P as y}from"./PageHeader.55df2133.js";import{P as n}from"./PagePadding.f9f1bdac.js";import{a as C}from"./FormFieldControl.6d022860.js";import{F as g,a as b}from"./FormFieldCompanyStructure.fe8e5fe2.js";import{S as h}from"./SaveIcon.a38dc1b6.js";import{c as S}from"./companyActions.3310e078.js";import{u as P,E as u}from"./useError.ed61bdd7.js";import{e as F,c as j,Y as v,j as l,a as e,D as f}from"./index.0e24cb86.js";import{B as x}from"./index.esm.726820fc.js";import"./ArrowLeftIcon.12227cb3.js";import"./index.esm.008f63b2.js";import"./index.esm.25501534.js";import"./FieldText.629ceab0.js";import"./FileIcon.5750f3bf.js";import"./FieldSelect.e91ecae3.js";import"./select.f59423ba.js";import"./slicedToArray.49cdadd5.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./index.esm.9fed1f3b.js";import"./AddIcon.52f4e4fc.js";import"./DeleteIcon.85510701.js";import"./v4.c3af96ce.js";const R=()=>{const a=P(S),o=F(),m=j(),p=v();return l(d,{title:"Tambah Company",children:[e(y,{useBackButton:!0,label:"Tambah Company"}),e(n,{x:6,children:l(C,{onSubmit:s=>{const c=s.structures&&s.structures.length>0?s.structures.map(t=>({id:t.id,name:t.structureName,parentId:`${t.parentId}`})):[];if(!s.picture)a.mutate({...s,object_structures:c},{onSuccess:t=>{o({title:"Success",description:t.message,position:"top",status:"success",isClosable:!0}),p.invalidateQueries(["companies"]),m("/master/companies")},onError:t=>u(t,o)});else{const t=new FormData;for(const[r,i]of Object.entries(s))r==="picture"?t.append("file",i==null?void 0:i[0]):r==="structures"?t.append("object_structures_string",JSON.stringify(c)):t.append(r,i);a.mutate(t,{onSuccess:r=>{o({title:"Success",description:r.message,position:"top",status:"success",isClosable:!0}),p.invalidateQueries(["companies"]),m("/master/companies")},onError:r=>u(r,o)})}},id:"form-company",initialValues:{name:null,picture:null,structures:[]},children:[e(g,{}),e(n,{x:0,y:5,children:e(f,{})}),e(b,{}),e(n,{x:0,y:5,children:e(f,{})}),e(x,{mt:5,leftIcon:e(h,{}),type:"submit",isLoading:a.isLoading,children:"Save"})]})})]})};export{R as default};
