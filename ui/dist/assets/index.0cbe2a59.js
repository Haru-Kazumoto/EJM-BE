import{c as A,d as M,e as O,Y as N,r as y,g as Q,R as H,a as e,ao as U,j as c,F as q,D as L,B as I}from"./index.0e24cb86.js";import{P as V}from"./Page.b0ec3cd0.js";import{P as Y}from"./PageHeader.55df2133.js";import{K as $}from"./KeyIcon.5273f942.js";import{P as G}from"./PagePadding.f9f1bdac.js";import{B as J}from"./BeTable.bd0a6b42.js";import{A as W}from"./AddIcon.52f4e4fc.js";import{d as X,a as Z,g as w}from"./rolesActions.f6ba71e7.js";import{U as ee}from"./useTableHelper.5363dd1c.js";import{D as m}from"./DeleteIcon.85510701.js";import{g as te}from"./TableCheckbox.7e306589.js";import{E as oe}from"./EditIcon.0dd57a11.js";import{o as S,c as x}from"./uiActions.408d82e2.js";import{u as D,E as B}from"./useError.ed61bdd7.js";import{C as _}from"./ConfirmDelete.262b9563.js";import{u as ae}from"./useTranslation.d6d641af.js";import{B as i}from"./index.esm.726820fc.js";import"./ArrowLeftIcon.12227cb3.js";import"./index.esm.008f63b2.js";import"./index.esm.25501534.js";import"./FilterIcon.eea7884e.js";import"./index.esm.9fed1f3b.js";import"./slicedToArray.49cdadd5.js";import"./index.esm.68da116c.js";import"./index.238261e4.js";import"./ErrorEmpty.82811164.js";import"./Pagination.656d36c1.js";import"./ExpandLeftIcon.708a001b.js";import"./ExpandRightIcon.0088b7a2.js";import"./SearchInput.6e0cefa2.js";import"./useDebounce.f82902b3.js";import"./index.esm.3048a115.js";import"./objectWithoutPropertiesLoose.2d2ba74a.js";import"./inheritsLoose.5105dba6.js";const Qe=()=>{var f,k,C;const{t:a}=ae(["role","global"]),u=A(),r=M(),n=O(),p=N(),{setPagination:R,searchValue:g,pagination:d,handleSearch:v}=ee(),[l,b]=y.exports.useState({}),P=D(X),z=D(Z),{data:o,isLoading:j}=Q(["roles",{searchValue:g,...d}],()=>w({pageSize:d.pageSize,current:d.pageIndex+1,search:g}),{keepPreviousData:!1}),E=()=>{const t=Object.keys(l).map(s=>+s);z.mutate(t,{onSuccess:s=>{n({status:"success",title:"success",description:s.message,position:"top",isClosable:!0}),r(x()),b({}),p.invalidateQueries(["roles"])},onError:s=>B(s,n)})},K=t=>{P.mutate(t,{onSuccess:s=>{n({status:"success",title:"success",description:s.message,position:"top",isClosable:!0}),r(x()),p.invalidateQueries(["roles"])},onError:s=>B(s,n)})},F=t=>{r(S(e(_,{onDelete:()=>K(t)}),a("modal.title.delete"),"sm"))},h=()=>{r(S(e(_,{onDelete:E}),a("modal.title.delete"),"sm"))},T=H.useMemo(()=>[{id:"checkbox",...te({useCheckbox:!0})},{id:a("table_roles.table_no"),width:"auto",header:a("table_roles.table_no"),accessorFn:(t,s)=>s+1},{id:a("table_roles.name"),header:a("table_roles.name"),accessorKey:"name"},{id:a("table_roles.status"),header:a("table_roles.status"),accessorKey:"is_active",cell:({row:t})=>e(U,{colorScheme:t.original.is_active?"green":"red",children:t.original.is_active?a("active"):a("nonactive")})},{id:a("table_roles.action"),header:a("table_roles.action"),cell:({row:t})=>e(y.exports.Fragment,{children:c(q,{gap:2,alignItems:"center",children:[e(i,{size:"sm",leftIcon:e(oe,{}),variant:"outline",onClick:()=>u(`/management/roles/edit/${t.original.id}`),children:"Edit"}),e(i,{size:"sm",leftIcon:e(m,{}),onClick:()=>F(t.original.id),colorScheme:"red",children:"Delete"})]})})}],[a]);return c(V,{title:"Roles",children:[e(Y,{label:"Roles",leftIcon:e($,{fontSize:24}),additional:e(i,{leftIcon:e(W,{fontSize:23}),onClick:()=>u("/management/roles/add"),size:{base:"xs",lg:"sm"},children:a("buttons.add")})}),e(L,{}),e(G,{x:0,y:6}),e(J,{data:(o==null?void 0:o.roles)||[],onChangeTable:R,loading:j,onSearch:v,rowKey:(t,s,le)=>t==null?void 0:t.id,pagination:{pageIndex:Number((f=o==null?void 0:o.page)!=null?f:0)-1,pageSize:Number((k=o==null?void 0:o.page_size)!=null?k:10)},leftFilter:e(I,{display:{base:"none",md:"block"},children:c(i,{leftIcon:e(m,{}),colorScheme:"red",onClick:h,disabled:Boolean(Object.keys(l).length<1),children:["Delete ",Object.keys(l).length," data"]})}),bottomFilter:e(I,{display:{base:"block",md:"none"},children:c(i,{leftIcon:e(m,{}),colorScheme:"red",size:"xs",onClick:h,disabled:Boolean(Object.keys(l).length<1),children:["Delete ",Object.keys(l).length," data"]})}),pageCount:Number((C=o==null?void 0:o.page_count)!=null?C:0),columns:T,useSearchInput:!0,rowSelectionProps:l,onCheckboxChange:b,totalRecords:o==null?void 0:o.total})]})};export{Qe as default};
